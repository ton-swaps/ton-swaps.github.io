{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///../tonswaplib/src/TonSwapOrderbook.js","webpack:///../tonswaplib/src/WalletAbi.js","webpack:///./src/App.vue?c5dd","webpack:///./src/components/Login.vue?13d3","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?2227","webpack:///./src/components/Login.vue","webpack:///./src/components/Withdraw.vue?ee24","webpack:///src/components/Withdraw.vue","webpack:///./src/components/Withdraw.vue?0962","webpack:///./src/components/Withdraw.vue","webpack:///./src/components/Deposit.vue?ffcf","webpack:///src/components/Deposit.vue","webpack:///./src/components/Deposit.vue?0b65","webpack:///./src/components/Deposit.vue","webpack:///./src/components/NewOrder.vue?20bb","webpack:///src/components/NewOrder.vue","webpack:///./src/components/NewOrder.vue?1b15","webpack:///./src/components/NewOrder.vue","webpack:///./src/components/ConfirmOrder.vue?eed1","webpack:///src/components/ConfirmOrder.vue","webpack:///./src/components/ConfirmOrder.vue?ab03","webpack:///./src/components/ConfirmOrder.vue","webpack:///./src/components/OrderList.vue?2f32","webpack:///src/components/OrderList.vue","webpack:///./src/components/OrderList.vue?f523","webpack:///./src/components/OrderList.vue","webpack:///./src/components/MyOrders.vue?f0f5","webpack:///src/components/MyOrders.vue","webpack:///./src/components/MyOrders.vue?30b1","webpack:///./src/components/MyOrders.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///../tonswaplib/src/Wallet.js","webpack:///../tonswaplib/src/eth.js","webpack:///../tonswaplib/src/ethtoken.js","webpack:///../tonswaplib/src/swaps/EthSwap.js","webpack:///../tonswaplib/src/configs.js","webpack:///../tonswaplib/src/util/request.js","webpack:///../tonswaplib/src/OrdersWatcher.js","webpack:///../tonswaplib/src/TonSwapOrderbookAbi.js","webpack:///../tonswaplib/src/helpers/ethereum.js","webpack:///../tonswaplib/src/index.js","webpack:///../tonswaplib/src/debug.js","webpack:///../tonswaplib/src/swaps/EthTokenSwap.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","require","TONClient","setWasmOptions","TonSwapOrderbookAbi","Wallet","BigInteger","OrdersWatcher","eth","ethtoken","debug","message","console","log","to_hex_array","to_byte_map","ord","toString","TonSwapOrderbook","smcAddress","network","this","inited","abi","swappers","ETH","USDT","ethEnabled","translate","BTC","TRANSACTION_VALUE","SWAP_DIRECT_TON_ETH","SWAP_DIRECT_TON_USDT","SWAP_DIRECT_TON_BTC","directTable","0","1","2","SWAP_REVERSED_ETH_TON","SWAP_REVERSED_USDT_TON","SWAP_REVERSED_BTC_TON","reversedTable","servers","client","ordersWatcher","token","buffer","hex_array","byteLength","join","toLowerCase","length2","Error","Uint8Array","i2","b","substring","digits","replace","bytes","hexToBytes","crypto","subtle","digest","hash","bytesToHex","ed25519Keypair","keys","secret","functionName","input","contracts","createRunBody","function","header","undefined","params","internal","keyPair","signingBox","res","bodyBase64","wallet","_createInternalMessage","msg","transact","getAddress","runLocal","address","fullRun","output","rate","_runGetMethod","exchangeRate","foreignValue","seed","login","add","_runSmcMethod","amount","out","freeFunds","balance","ordersFunds","inOrders","lockedFunds","locked","swapId","initiatorAddress","order","id","direct","fromToken","toToken","secretHash","hexAlign","orders","getDirectOrder","getReversedOrder","minAmount","lockTime","initiatorAltAddress","checks","swapDirect","minValue","sha256","dbId","timeLockSlot","initiatorTargetAddress","initiatorSourceAddress","recipientAltAddress","confirmed","confirmatorSourceAddress","confirmatorTargetAddress","getDirectOrders","getReversedOrders","initiatorPK","Promise","resolve","setTimeout","WalletAbi","_vm","_h","$createElement","_c","_self","attrs","alert","_v","class","isLogged","staticClass","tab","on","usdt","btc","_e","logout","_s","_f","deposit","withdraw","logged","withdrawn","depositAddress","deposited","newOrder","orderCreated","newOrderConfirm","orderConfirmed","orderList","createOrder","confirmOrder","staticRenderFns","alertMsg","model","form","callback","$$v","$set","expression","loginInProgress","methods","evt","preventDefault","_login","component","maxAmount","withdrawInProgress","props","_withdraw","depositInProgress","_deposit","amountStep","altToken","targetAmount","targetCurrency","sourceCurrency","maxLock","timeSlots","Math","min","createInProgress","timeSlot","created","maxTonAmount","$swapOrderbook","translateToken","mounted","waitEthAddresses","watch","computed","Number","MAX_VALUE","_create","foreignMinValue","targetValue","confirmInProgress","$options","filters","formatHour","$altValue","$tonValue","formatAlt","formatTon","formatAltHex","_confirm","loading","perPage","rows","currentPage","fields","scopedSlots","_u","fn","row","$event","swap","item","index","loadingReversed","ordersReversed","createOrderReversed","rowsReversed","currentPageReversed","timerDirect","clearTimeout","timerReversed","updateDirectOrderbook","updateReversedOrderbook","beforeDestroy","isInited","getOrders","$emit","freshing","updateOrders","isClosePossible","close","toggleDetails","detailsShowing","_l","domProps","timer","status","lockedUntil","tonWithdrawUntil","info","Secret","altCreateUntil","altWithdrawUntil","tonCreateTxId","tonConfirmTxId","altApproveTxId","altTxId","altFinishTxId","tonFinishTxId","_showDetails","newlist","closeOrder","components","Login","Withdraw","Deposit","NewOrder","ConfirmOrder","OrderList","MyOrders","init","isAnyActive","from","to","Vue","$BigInt","use","BootstrapVue","config","productionTip","filter","numeral","format","quotient","toJSValue","slot","parseInt","Date","toISOString","txid","$convertValue","multiply","$convertRate","$convertAltAddress","addr","render","h","App","$mount","run","HD_PATH","mnemonicDeriveSignKeys","dictionary","wordCount","phrase","path","runGetMethod","custodians","custodian","pubkey","public","compare","destAddress","payload","runSmcMethod","dest","bounce","allBalance","transaction","fees","totalAccountFees","totalOutput","getAccount","EthSwap","Web3","testnet_config","ethInit","ethereum","web3","enable","ethGetAddresses","getAccounts","addresses","EthSwapInitiator","sourceAddress","targetAddress","mainnet","isMainnet","eth_address","eth_abi","gasLimit","gasPrice","getParticipantAddress","transactionHash","swapObj","participantAddress","refund","swaps","ownerAddress","fetchBalance","bl","speed","estimateGasPrice","EthSwapReceiver","receipt","EthTokenSwap","EthTokenSwapInitiator","tokenAddress","tokens","eth_token_address","eth_token_abi","decimals","tokenAbi","approve","checkAllowance","spender","EthTokenSwapReceiver","BigNumber","InputDataDecoder","testnet","options","Array","isArray","providers","HttpProvider","provider","_swapName","decoder","contract","Contract","warn","updateGasPrice","handleTransactionHash","targetWallet","hasTargetWallet","createSwapTarget","createSwap","methodName","args","_params","reject","gas","estimateGas","gasAmount","send","err","amountWei","values","getBalance","expectedValue","expectedHash","util","helpers","repeatAsyncUntilResult","_secretHash","expectedValueWei","multipliedBy","isGreaterThan","_allSwapEvents","getPastEvents","fromBlock","toBlock","allSwapEvents","events","allEvents","event","error","fetchSwapEvents","swapEvents","returnValues","rest","findSwap","wasClosed","then","getTargetWallet","getTargetWalletPromise","calcWithdrawOtherGas","withdrawOther","_secret","gasFee","getSecret","catch","getTransaction","txResult","bytes32","decodeData","utils","inputs","split","ton","testnet_contracts","ton_address","ton_abi","testnet_tokens","fullName","request","createResponseHandler","req","opts","method","toUpperCase","endpoint","fulfill","end","serverError","body","statusCode","onComplete","resData","JSON","parse","text","modifyResult","defaultOptions","sameOrigin","sendRequest","timeout","response","deadline","query","withCredentials","responseHandler","abort","requestByMethod","post","patch","put","delete","OrderWather","orderbook","TON_TX_RETRY","generateSecret","localStorage","getItem","state","setItem","stringify","tx","transaction_id","tonCreateTxTm","floor","now","save","tonConfirmTxTm","confirm","isActive","old_status","changed","checkCreated","checkConfirm","withdrawAltSecret","withdrawTonTimeout","createAltSwap","waitForSecret","withdrawTonSecret","withdrawAltTimeout","tm","confirmedTm","confirmTime","getAltValue","altValue","timeLockUntil","sourceAddr","dstAddress","receiverEth","getSwap","createdAt","secretHash2","altFinishTxTm","tokenAddress2","initiatorEth","altTxTm","altApproveTxTm","checkApprove","withdrawWithTimeout","tonFinishTxTm","finishOrderWithSecret","finishOrderWithTimeout","loadAll","list","load","storageId","initId","saveAll","getOrder","TESTNET_PROVIDER","MAINNET_PROVIDER","process","WEB3_MAINNET_PROVIDER","LOCAL_PROVIDER","WEB3_LOCAL_PROVIDER","WEB3_PROVIDERS","localnet","ETHERCHAIN_API","ETHGASSTATION_API","TEN","ETHERSCAN_APIKEY","filterError","code","Ethereum","_network","_provider","core","currentProvider","etherscan","wei","fromWei","base","pow","url","cacheResponse","queryResponse","raw","dividedBy","accounts","toWei","sendTransaction","estimateGasPriceEtherChain","estimateGasPriceEthGasStation","estimateGasPriceWeb3","_multiplier","getGasPrice","_speed","cacheOnFail","prefix","fetchTokenBalance","ERC20","newAmount","allowance","secretValue","test"],"mappings":"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","file":"js/app.364b2511.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","const { TONClient, setWasmOptions } = require('ton-client-web-js')\nconst TonSwapOrderbookAbi = require('./TonSwapOrderbookAbi');\nconst Wallet = require('./Wallet');\nconst { BigInteger } = require('javascript-biginteger');\nconst OrdersWatcher = require('./OrdersWatcher');\nconst eth = require('./eth');\nconst ethtoken = require('./ethtoken');\n\nfunction debug(message) {\n  console.log(message)\n}\n\nconst to_hex_array = [];\nconst to_byte_map = {};\nfor (let ord = 0; ord <= 0xff; ord++) {\n    let s = ord.toString(16);\n    if (s.length < 2) {\n        s = \"0\" + s;\n    }\n    to_hex_array.push(s);\n    to_byte_map[s] = ord;\n}\n\nclass TonSwapOrderbook {\n  constructor (smcAddress, network=['net.ton.dev']) {\n    // ['main.ton.dev']\n    this.inited = false\n    this.network = network\n    this.smcAddress = smcAddress\n    this.abi = TonSwapOrderbookAbi\n    this.swappers = {\n      ETH: eth,\n      USDT: ethtoken\n    }\n    // this.swappers.ETH.ethInit()\n    this.swappers.ETH.ethEnabled()\n\n    this.translate = {\n      'TON CRYSTAL': 'Free TON',\n      ETH: 'Ethereum',\n      USDT: 'Ethereum',\n      BTC: 'Bitcoin'\n    }\n    this.TRANSACTION_VALUE = 1000000000 // 1 TON CRYSTAL\n\n    this.SWAP_DIRECT_TON_ETH = 0;\n    this.SWAP_DIRECT_TON_USDT = 1;\n    this.SWAP_DIRECT_TON_BTC = 2;\n    this.directTable = {\n      0: ['TON CRYSTAL', 'ETH'],\n      1: ['TON CRYSTAL', 'USDT'],\n      2: ['TON CRYSTAL', 'BTC'],\n      'ETH': 0,\n      'USDT': 1,\n      'BTC': 2\n    }\n    this.SWAP_REVERSED_ETH_TON = 0;\n    this.SWAP_REVERSED_USDT_TON = 1;\n    this.SWAP_REVERSED_BTC_TON = 2;\n    this.reversedTable = {\n      0: ['ETH', 'TON CRYSTAL'],\n      1: ['USDT', 'TON CRYSTAL'],\n      2: ['BTC', 'TON CRYSTAL'],\n      'ETH': 0,\n      'USDT': 1,\n      'BTC': 2\n    }\n    this.BigInteger = BigInteger\n  }\n\n  async init() {\n    setWasmOptions({\n      debug,\n    });\n    this.client = await TONClient.create({\n        servers: this.network\n    });\n    this.ordersWatcher = new OrdersWatcher(this.client, this)\n    this.inited = true\n  }\n\n  isInited () {\n    return this.inited\n  }\n\n  getAddress () {\n    return this.smcAddress\n  }\n\n  translateToken (token) {\n    return this.translate[token]\n  }\n\n\n  bytesToHex(buffer) {\n    const hex_array = []\n    for (let i = 0; i < buffer.byteLength; i++) {\n        hex_array.push(to_hex_array[buffer[i]])\n    }\n    return hex_array.join(\"\")\n  }\n\n  \n  bytesToHexString(buffer) {\n    const hex_array = []\n    for (let i = 0; i < buffer.byteLength; i++) {\n        hex_array.push('\\\\x' + to_hex_array[buffer[i]])\n    }\n    return hex_array.join(\"\")\n  }\n\n  hexToBytes(s) {\n    s = s.toLowerCase()\n    const length2 = s.length\n    if (length2 % 2 !== 0) {\n        throw Error(\"hex string must have length a multiple of 2\");\n    }\n    const length = length2 / 2\n    const result = new Uint8Array(length)\n    for (let i = 0; i < length; i++) {\n        const i2 = i * 2\n        const b = s.substring(i2, i2 + 2)\n        result[i] = to_byte_map[b]\n    }\n    return result;\n  }\n\n  hexAlign(value, digits) {\n    value = value.replace('0x', '')\n    for (let i = digits - value.length; i > 0; i--) {\n      value = '0' + value\n    }\n    return value\n  }\n\n  async sha256 (bytes) {\n    if (typeof window !== 'undefined') {\n      if (typeof bytes === 'string') {\n        bytes = this.hexToBytes(bytes.replace('0x', ''))\n      }\n      const hash = await crypto.subtle.digest(\"SHA-256\", bytes)\n      console.log('hash', hash)\n      return '0x' + this.bytesToHex(new Uint8Array(hash))\n    }\n  }\n\n  async generateSecret () {\n    const keys = await this.client.crypto.ed25519Keypair()\n    return this.hexToBytes(keys.secret)\n  }\n\n  async _createInternalMessage (functionName, input={}) {\n    console.log('_createInternalMessage');\n    console.log('abi', this.abi);\n    console.log('functionName', functionName);\n    console.log('input', input);\n    const res = await this.client.contracts.createRunBody({\n      abi: this.abi,\n      function: functionName,\n      header: undefined,\n      params: input,\n      internal: true,\n      keyPair: undefined,\n      signingBox: undefined\n    });\n    console.log('output', res);\n    return res.bodyBase64;\n  }\n\n  async _runSmcMethod (value, functionName, input={}) {\n    console.log('_runSmcMethod');\n    console.log('value', value);\n    console.log('functionName', functionName);\n    console.log('input', input);\n\n    if (!this.wallet) throw Error('Not logged')\n\n    const msg = await this._createInternalMessage(functionName, input)\n    \n    const res = await this.wallet.transact(value, \n                                    this.getAddress(),\n                                    msg)\n    \n    console.log('output', res);\n    return res;\n  }\n\n  async _runGetMethod (functionName, input={}) {\n    console.log('_runGetMethod');\n    console.log('functionName', functionName);\n    console.log('input', input);\n    const res = await this.client.contracts.runLocal({\n      address: this.smcAddress,\n      abi: this.abi,\n      functionName,\n      fullRun: false,\n      input: input\n    });\n    console.log('output', res);\n    return res.output;\n  }\n\n  async getAltValue (value, rate) {\n    console.log('getAltValue:', value, rate)\n    try {\n      const res = await this._runGetMethod ('calcForeignOutput', {\n          value: value,\n          exchangeRate: rate\n        })\n      return res.foreignValue\n    } catch (e) {\n      console.log('getAltValue error:', e)\n    }\n    return undefined\n  }\n\n  async login (address, seed) {\n    const wallet = new Wallet(this.client)\n    await wallet.login(address, seed)\n    this.wallet = wallet\n  }\n\n  logout () {\n    this.wallet = undefined\n  }\n\n  /**\n   * \n   * @param {number} value Value in TON CRYSTALS \n   * @param {*} seed Seed phrase\n   */\n  async deposit (value, seed) {\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    value = BigInteger(value)\n    value = value.add(this.TRANSACTION_VALUE)\n\n    const res = await this.wallet.transact('0x' + value.toString(16), this.getAddress())\n    console.log('deposit', res)\n\n    return res;\n  }\n\n  /**\n   * \n   * @param {number} value Value in TON CRYSTALS \n   * @param {*} seed Seed phrase\n   */\n  async withdraw (value, seed) {\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    value = BigInteger(value)\n\n    const res = await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'withdraw',\n                            {\n                              amount: '0x' + value.toString(16)\n                            })\n\n    return res\n  }\n\n  async updateInfo () {\n    if (!this.wallet) throw Error('Not logged')\n\n    const res = await this._runGetMethod('getBalance', {'participant': this.wallet.getAddress()})\n    const out = {\n      freeFunds: res.balance.value,\n      ordersFunds: res.balance.inOrders,\n      lockedFunds: res.balance.locked\n    }\n    return out\n  }\n\n  /**\n   * \n   * @param {number} swapId SWAP_DIRECT_*\n   * @param {string} initiatorAddress order initiator address\n   */\n  async getDirectOrder(swapId, initiatorAddress) {\n    const res = await this._runGetMethod('getDirectOrder',\n                                        {\n                                          'dbId': swapId,\n                                          'initiatorAddress': initiatorAddress\n                                        })\n    if (res.order.value === '0x0') {\n      return undefined\n    }\n    res.order.id = initiatorAddress\n    res.order.swapId = swapId\n    res.order.direct = true\n    res.order.fromToken = this.directTable[swapId][0]\n    res.order.toToken = this.directTable[swapId][1]\n    res.order.secretHash = '0x' + this.hexAlign(res.order.secretHash, 64)\n    return res.order\n  }\n\n  /**\n   * \n   * @param {number} swapId SWAP_REVERSED_*\n   * @param {string} initiatorAddress order initiator address\n   */\n  async getReversedOrder(swapId, initiatorAddress) {\n    const res = await this._runGetMethod('getReversedOrder',\n                                        {\n                                          'dbId': swapId,\n                                          'initiatorAddress': initiatorAddress\n                                        })\n    if (res.order.foreignValue === '0x0') {\n      return undefined\n    }\n    res.order.id = initiatorAddress\n    res.order.swapId = swapId\n    res.order.direct = false\n    res.order.fromToken = this.reversedTable[swapId][0]\n    res.order.toToken = this.reversedTable[swapId][1]\n    res.order.secretHash = '0x' + this.hexAlign(res.order.secretHash, 64)\n    return res.order\n  }\n\n  async getDirectOrders(swapId) {\n    const res = await this._runGetMethod('getDirectOrders',\n                                        {\n                                          'dbId': swapId\n                                        })\n    let orders = []\n    for (let i in res.orders) {\n      const order = await this.getDirectOrder(swapId, res.orders[i])\n      if (order) {\n        orders.push(order)\n      }\n    }\n    return orders\n  }\n\n  async getReversedOrders(swapId) {\n    const res = await this._runGetMethod('getReversedOrders',\n                                        {\n                                          'dbId': swapId\n                                        })\n    let orders = []\n    for (let i in res.orders) {\n      const order = await this.getReversedOrder(swapId, res.orders[i])\n      if (order) {\n        orders.push(order)\n      }\n    }\n    return orders\n  }\n\n  async getMyOrders () {\n    if (!this.wallet) throw Error('Not logged')\n    let orders = []\n    let res;\n    res = await this.getDirectOrder(this.SWAP_DIRECT_TON_USDT, this.wallet.getAddress())\n    if (res) orders.push(res)\n    res = await this.getDirectOrder(this.SWAP_DIRECT_TON_ETH, this.wallet.getAddress())\n    if (res) orders.push(res)\n    res = await this.getDirectOrder(this.SWAP_DIRECT_TON_BTC, this.wallet.getAddress())\n    if (res) orders.push(res)\n    res = await this.getReversedOrder(this.SWAP_REVERSED_USDT_TON, this.wallet.getAddress())\n    if (res) orders.push(res)\n    res = await this.getReversedOrder(this.SWAP_REVERSED_ETH_TON, this.wallet.getAddress())\n    if (res) orders.push(res)\n    res = await this.getReversedOrder(this.SWAP_REVERSED_BTC_TON, this.wallet.getAddress())\n    if (res) orders.push(res)\n    return orders\n  }\n\n  /*\n\n   */\n  async createOrder (fromToken, toToken, rate, amount, minAmount, lockTime, initiatorAltAddress, secret, seed, checks=true) {\n    console.log('createOrder', rate, amount, minAmount, lockTime, initiatorAltAddress, seed)\n    const swapDirect = fromToken === 'TON CRYSTAL'\n    const swapId = swapDirect ? this.directTable[toToken] : this.reversedTable[fromToken]\n\n    if (checks) {\n      let order\n      // update order info\n      if (swapDirect) {\n        order = await this.getDirectOrder(swapId, this.wallet.getAddress())\n      } else {\n        order = await this.getReversedOrder(swapId, this.wallet.getAddress())\n      }\n      if (order) throw Error('Order already exists')\n    }\n\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    if (swapDirect) {\n\n      let value = BigInteger(amount)\n      let minValue = BigInteger(minAmount)\n      let exchangeRate = BigInteger(rate)\n      let secretHash = '0x' + this.hexAlign(await this.sha256(secret), 64)\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'createDirectOrder',\n                            {\n                              dbId: swapId,\n\t\t\t\t                      value: '0x' + value.toString(16),\n\t\t\t\t                      minValue: '0x' + minValue.toString(16),\n\t\t\t\t                      exchangeRate: '0x' + exchangeRate.toString(16),\n\t\t\t\t                      timeLockSlot: lockTime,\n\t\t\t\t                      secretHash: secretHash,\n\t\t\t\t                      initiatorTargetAddress: initiatorAltAddress\n                            })\n\n    } else {\n\n      let value = BigInteger(amount)\n      let minValue = BigInteger(minAmount)\n      let exchangeRate = BigInteger(rate)\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'createReversedOrder',\n                            {\n                              dbId: swapId,\n\t\t\t\t                      value: '0x' + value.toString(16),\n\t\t\t\t                      minValue: '0x' + minValue.toString(16),\n\t\t\t\t                      exchangeRate: '0x' + exchangeRate.toString(16),\n\t\t\t\t                      timeLockSlot: lockTime,\n\t\t\t\t                      initiatorSourceAddress: initiatorAltAddress\n                            })\n    }\n\n    /*\n    this.order.status = 'Created'\n    this.order.initiatorPK = this.getPK(seed)\n    this.order.direct = fromToken === 'TON CRYSTAL'\n    this.order.fromToken = fromToken\n    this.order.toToken = toToken\n    this.order.rate = rate\n    this.order.amount = amount\n    this.order.minAmount = minAmount\n    this.order.lockTime = lockTime\n    // initiatorTargetAddress (alt chain) if direct\n    // initiatorSourceAddress (alt chain) if not direct\n    this.order.initiatorAltAddress = initiatorAltAddress\n    if (this.order.direct) {\n      this.order.secret = 'secret'\n      this.order.hash = '0xdeadbeef'\n    }\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    return await this.updateInfo(this.order.initiatorPK)\n    */\n  }\n\n  async confirmOrder (order, amount, recipientAltAddress, secret, seed, checks=true) {\n    console.log('confirmOrder', order, amount, recipientAltAddress, seed)\n\n    if (checks) {\n      // update order info\n      if (order.direct) {\n        order = await this.getDirectOrder(order.swapId, order.id)\n      } else {\n        order = await this.getReversedOrder(order.swapId, order.id)\n      }\n      if (!order) throw Error('Order already closed')\n      if (order.confirmed) throw Error('Order already confirmed')\n    }\n\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    if (order.direct) {\n\n      let value = BigInteger(amount)\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'confirmDirectOrder',\n                            {\n                              dbId: order.swapId,\n\t\t\t\t                      value: '0x' + value.toString(16),\n\t\t\t\t                      initiatorAddress: order.id,\n\t\t\t\t                      confirmatorSourceAddress: recipientAltAddress\n                            })\n    } else {\n\n      let value = BigInteger(amount)\n      let secretHash = '0x' + this.hexAlign(await this.sha256(secret), 64)\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'confirmReversedOrder',\n                            {\n                              dbId: order.swapId,\n\t\t\t\t                      value: '0x' + value.toString(16),\n\t\t\t\t                      initiatorAddress: order.id,\n                              confirmatorTargetAddress: recipientAltAddress,\n                              secretHash: secretHash\n                            })\n    }\n    /*\n    this.order.status = 'Confirmed'\n    this.order.recipientPK = this.getPK(seed)\n    this.order.recipientAmount = amount\n    // recipientTargetAddress (alt chain) if not direct\n    // recipientSourceAddress (alt chain) if direct\n    this.order.recipientAltAddress = recipientAltAddress\n    if (!this.order.direct) {\n      this.order.secret = 'secret'\n      this.order.hash = '0xdeadbeef'\n    }\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    */\n  }\n\n  async closeOrder(order, seed, checks=true) {\n\n    if (checks) {\n      // update order info\n      if (order.direct) {\n        order = await this.getDirectOrder(order.swapId, order.id)\n      } else {\n        order = await this.getReversedOrder(order.swapId, order.id)\n      }\n      if (!order) throw Error('Order already closed')\n      if (order.confirmed) throw Error('Order already confirmed')\n    }\n\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n    if (order.id !== this.wallet.getAddress()) throw Error('Cannot close another\\'s order')\n\n    if (order.direct) {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'deleteDirectOrder',\n                            {\n                              dbId: order.swapId\n                            })\n    } else {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'deleteReversedOrder',\n                            {\n                              dbId: order.swapId\n                            })\n    }\n  }\n\n  async finishOrderWithSecret(order, secret, seed, checks=true) {\n\n    if (typeof secret !== 'string') {\n      secret = this.bytesToHex(secret)\n    } else {\n      secret = secret.replace('0x', '')\n    }\n    secret = this.hexAlign(secret, 64)\n\n    if (checks) {\n      // update order info\n      if (order.direct) {\n        order = await this.getDirectOrder(order.swapId, order.id)\n      } else {\n        order = await this.getReversedOrder(order.swapId, order.id)\n      }\n      if (!order) throw Error('Order already closed')\n      if (!order.confirmed) throw Error('Order not confirmed')\n      // check secret & hash\n    }\n\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    if (order.direct) {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'finishDirectOrderWithSecret',\n                            {\n                              dbId: order.swapId,\n                              initiatorAddress: order.id,\n                              secret: secret\n                            })\n\n    } else {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'finishReversedOrderWithSecret',\n                            {\n                              dbId: order.swapId,\n                              initiatorAddress: order.id,\n                              secret: secret\n                            })\n    }\n  }\n\n\n  async finishOrderWithTimeout(order, seed, checks=true) {\n\n    if (checks) {\n      // update order info\n      if (order.direct) {\n        order = await this.getDirectOrder(order.swapId, order.id)\n      } else {\n        order = await this.getReversedOrder(order.swapId, order.id)\n      }\n      if (!order) throw Error('Order already closed')\n      if (!order.confirmed) throw Error('Order not confirmed')\n    }\n\n    if (!this.wallet) throw Error('Not logged')\n    if (seed !== this.wallet.seed) throw Error('Invalid seed phrase')\n\n    if (order.direct) {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'finishDirectOrderWithTimeout',\n                            {\n                              dbId: order.swapId,\n                              initiatorAddress: order.id\n                            })\n    } else {\n\n      return await this._runSmcMethod(this.TRANSACTION_VALUE,\n                            'finishReversedOrderWithTimeout',\n                            {\n                              dbId: order.swapId,\n                              initiatorAddress: order.id\n                            })\n    }\n  }\n\n  async getOrders (fromToken, toToken) {\n    const swapDirect = fromToken === 'TON CRYSTAL'\n    const swapId = swapDirect ? this.directTable[toToken] : this.reversedTable[fromToken]\n\n    if (swapDirect) {\n      return await this.getDirectOrders(swapId)\n    } else {\n      return await this.getReversedOrders(swapId)\n    }\n  }\n\n  // TODO\n  async getOrder (fromToken, toToken, initiatorPK) {\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    return this.order\n  }\n\n  /*\n  async closeOrder (fromToken, toToken, pk) {\n    await new Promise(resolve => setTimeout(resolve, 2000))\n    return true\n  }\n  */\n}\n\n\nmodule.exports = TonSwapOrderbook;","const WalletAbi = {\n\t\"ABI version\": 2,\n\t\"header\": [\"pubkey\", \"time\", \"expire\"],\n\t\"functions\": [\n\t\t{\n\t\t\t\"name\": \"constructor\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"owners\",\"type\":\"uint256[]\"},\n\t\t\t\t{\"name\":\"reqConfirms\",\"type\":\"uint8\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"acceptTransfer\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"payload\",\"type\":\"bytes\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"sendTransaction\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dest\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint128\"},\n\t\t\t\t{\"name\":\"bounce\",\"type\":\"bool\"},\n\t\t\t\t{\"name\":\"flags\",\"type\":\"uint8\"},\n\t\t\t\t{\"name\":\"payload\",\"type\":\"cell\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"submitTransaction\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dest\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint128\"},\n\t\t\t\t{\"name\":\"bounce\",\"type\":\"bool\"},\n\t\t\t\t{\"name\":\"allBalance\",\"type\":\"bool\"},\n\t\t\t\t{\"name\":\"payload\",\"type\":\"cell\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"transId\",\"type\":\"uint64\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"confirmTransaction\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"transactionId\",\"type\":\"uint64\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"isConfirmed\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"mask\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"index\",\"type\":\"uint8\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"confirmed\",\"type\":\"bool\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getParameters\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"maxQueuedTransactions\",\"type\":\"uint8\"},\n\t\t\t\t{\"name\":\"maxCustodianCount\",\"type\":\"uint8\"},\n\t\t\t\t{\"name\":\"expirationTime\",\"type\":\"uint64\"},\n\t\t\t\t{\"name\":\"minValue\",\"type\":\"uint128\"},\n\t\t\t\t{\"name\":\"requiredTxnConfirms\",\"type\":\"uint8\"},\n\t\t\t\t{\"name\":\"requiredUpdConfirms\",\"type\":\"uint8\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getTransaction\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"transactionId\",\"type\":\"uint64\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"id\",\"type\":\"uint64\"},{\"name\":\"confirmationsMask\",\"type\":\"uint32\"},{\"name\":\"signsRequired\",\"type\":\"uint8\"},{\"name\":\"signsReceived\",\"type\":\"uint8\"},{\"name\":\"creator\",\"type\":\"uint256\"},{\"name\":\"index\",\"type\":\"uint8\"},{\"name\":\"dest\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint128\"},{\"name\":\"sendFlags\",\"type\":\"uint16\"},{\"name\":\"payload\",\"type\":\"cell\"},{\"name\":\"bounce\",\"type\":\"bool\"}],\"name\":\"trans\",\"type\":\"tuple\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getTransactions\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"id\",\"type\":\"uint64\"},{\"name\":\"confirmationsMask\",\"type\":\"uint32\"},{\"name\":\"signsRequired\",\"type\":\"uint8\"},{\"name\":\"signsReceived\",\"type\":\"uint8\"},{\"name\":\"creator\",\"type\":\"uint256\"},{\"name\":\"index\",\"type\":\"uint8\"},{\"name\":\"dest\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint128\"},{\"name\":\"sendFlags\",\"type\":\"uint16\"},{\"name\":\"payload\",\"type\":\"cell\"},{\"name\":\"bounce\",\"type\":\"bool\"}],\"name\":\"transactions\",\"type\":\"tuple[]\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getTransactionIds\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"ids\",\"type\":\"uint64[]\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getCustodians\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"index\",\"type\":\"uint8\"},{\"name\":\"pubkey\",\"type\":\"uint256\"}],\"name\":\"custodians\",\"type\":\"tuple[]\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"submitUpdate\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"codeHash\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"owners\",\"type\":\"uint256[]\"},\n\t\t\t\t{\"name\":\"reqConfirms\",\"type\":\"uint8\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"updateId\",\"type\":\"uint64\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"confirmUpdate\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"updateId\",\"type\":\"uint64\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"executeUpdate\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"updateId\",\"type\":\"uint64\"},\n\t\t\t\t{\"name\":\"code\",\"type\":\"cell\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getUpdateRequests\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"id\",\"type\":\"uint64\"},{\"name\":\"index\",\"type\":\"uint8\"},{\"name\":\"signs\",\"type\":\"uint8\"},{\"name\":\"confirmationsMask\",\"type\":\"uint32\"},{\"name\":\"creator\",\"type\":\"uint256\"},{\"name\":\"codeHash\",\"type\":\"uint256\"},{\"name\":\"custodians\",\"type\":\"uint256[]\"},{\"name\":\"reqConfirms\",\"type\":\"uint8\"}],\"name\":\"updates\",\"type\":\"tuple[]\"}\n\t\t\t]\n\t\t}\n\t],\n\t\"data\": [\n\t],\n\t\"events\": [\n\t\t{\n\t\t\t\"name\": \"TransferAccepted\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"payload\",\"type\":\"bytes\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t}\n\t]\n}\n\nmodule.exports = WalletAbi;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('b-alert',{attrs:{\"id\":\"alert\",\"show\":_vm.alert}},[_vm._v(\"Swap operation in progress, please do not close this tab\")]),_c('b-navbar',{class:[ _vm.isLogged ? '' : 'mb-20' ],attrs:{\"id\":\"navbar\",\"toggleable\":\"sm\",\"type\":\"dark\",\"variant\":\"primary\",\"sticky\":\"\"}},[_c('b-navbar-brand',{attrs:{\"href\":\"#\"}},[_vm._v(\"Free TON Atomic Swaps \"),_c('sup',[_vm._v(\"demo\")])]),_c('b-navbar-toggle',{attrs:{\"target\":\"nav-collapse\"}}),_c('b-collapse',{attrs:{\"id\":\"nav-collapse\",\"is-nav\":\"\"}},[_c('b-navbar-nav',{staticClass:\"ml-auto\",attrs:{\"right\":\"\"}},[_c('b-nav-item',{attrs:{\"href\":\"#\",\"active\":_vm.tab === 'eth'},on:{\"click\":_vm.eth}},[_vm._v(\"ETH\")]),_c('b-nav-item',{attrs:{\"href\":\"#\",\"active\":_vm.tab === 'usdt'},on:{\"click\":_vm.usdt}},[_vm._v(\"USDT\")]),_c('b-nav-item',{attrs:{\"href\":\"#\",\"active\":_vm.tab === 'btc'},on:{\"click\":_vm.btc}},[_vm._v(\"BTC\")]),(_vm.isLogged)?_c('b-nav-item',{attrs:{\"href\":\"#\",\"active\":_vm.tab === 'orders'},on:{\"click\":_vm.orders}},[_vm._v(\"ORDERS\")]):_vm._e(),(!_vm.isLogged)?_c('b-nav-item',{attrs:{\"href\":\"#\",\"active\":_vm.tab === 'login'},on:{\"click\":_vm.login}},[_vm._v(\"LOGIN\")]):_vm._e(),(_vm.isLogged)?_c('b-nav-item',{attrs:{\"href\":\"#\"},on:{\"click\":_vm.logout}},[_vm._v(\"LOGOUT\")]):_vm._e()],1)],1)],1),(_vm.isLogged)?_c('b-navbar',{staticClass:\"mb-20\",attrs:{\"id\":\"navbar\",\"toggleable\":\"sm\",\"type\":\"dark\",\"variant\":\"light\",\"sticky\":\"\"}},[_c('span',{staticClass:\"mr-2\"},[_vm._v(\" Free: \"+_vm._s(_vm._f(\"formatTonHex\")(_vm.balance.freeFunds))+\" \")]),_c('span',{staticClass:\" ml-2 mr-2\"},[_vm._v(\" In Orders: \"+_vm._s(_vm._f(\"formatTonHex\")(_vm.balance.ordersFunds))+\" \")]),_c('span',{staticClass:\" ml-2 mr-2\"},[_vm._v(\" Locked: \"+_vm._s(_vm._f(\"formatTonHex\")(_vm.balance.lockedFunds))+\" \")]),_c('b-navbar-nav',{staticClass:\"ml-auto\",attrs:{\"right\":\"\"}},[_c('b-button',{staticClass:\"ml-2\",attrs:{\"href\":\"#\",\"variant\":\"primary\",\"left\":\"\"},on:{\"click\":_vm.deposit}},[_vm._v(\"Deposit\")]),_c('b-button',{staticClass:\"ml-2\",attrs:{\"href\":\"#\",\"variant\":\"primary\",\"left\":\"\",\"disabled\":_vm.balance.freeFunds === '0x0'},on:{\"click\":_vm.withdraw}},[_vm._v(\"Withdraw\")])],1)],1):_vm._e(),_c('span',{staticClass:\"border\"}),(_vm.tab === 'login')?_c('Login',{on:{\"logged\":_vm.logged}}):_vm._e(),(_vm.tab === 'withdraw')?_c('Withdraw',{attrs:{\"address\":_vm.address,\"maxAmount\":_vm.balance.freeFunds},on:{\"withdrawn\":_vm.withdrawn}}):_vm._e(),(_vm.tab === 'deposit')?_c('Deposit',{attrs:{\"address\":_vm.address,\"depositAddress\":_vm.depositAddress},on:{\"deposited\":_vm.deposited}}):_vm._e(),(_vm.tab === 'newOrder')?_c('NewOrder',{attrs:{\"address\":_vm.address,\"maxTonAmount\":_vm.balance.freeFunds,\"order\":_vm.newOrder},on:{\"orderCreated\":_vm.orderCreated}}):_vm._e(),(_vm.tab === 'confirmOrder')?_c('ConfirmOrder',{attrs:{\"address\":_vm.address,\"maxTonAmount\":_vm.balance.freeFunds,\"order\":_vm.newOrderConfirm},on:{\"orderConfirmed\":_vm.orderConfirmed}}):_vm._e(),(_vm.tab === 'eth' || _vm.tab === 'usdt' || _vm.tab === 'btc')?_c('OrderList',{attrs:{\"logged\":_vm.isLogged,\"token\":_vm.orderList.token},on:{\"createOrder\":_vm.createOrder,\"confirmOrder\":_vm.confirmOrder}}):_vm._e(),(_vm.tab === 'orders')?_c('MyOrders',{attrs:{\"address\":_vm.address}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"8\",\"offset\":\"2\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"Login\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.alert}},[_vm._v(_vm._s(_vm.alertMsg))]),_c('b-form',{on:{\"submit\":_vm.login}},[_c('b-form-group',{attrs:{\"id\":\"input-group-1\",\"label\":\"Your Free TON address:\",\"label-for\":\"input-1\"}},[_c('b-form-input',{attrs:{\"id\":\"input-1\",\"required\":\"\",\"placeholder\":\"Enter Free TON address\"},model:{value:(_vm.form.address),callback:function ($$v) {_vm.$set(_vm.form, \"address\", $$v)},expression:\"form.address\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-2\",\"label\":\"Your Seed phrase:\",\"label-for\":\"input-2\"}},[_c('b-form-input',{attrs:{\"id\":\"input-2\",\"required\":\"\",\"placeholder\":\"Enter Seed phrase\"},model:{value:(_vm.form.seed),callback:function ($$v) {_vm.$set(_vm.form, \"seed\", $$v)},expression:\"form.seed\"}})],1),_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.loginInProgress,\"type\":\"submit\"}},[(_vm.loginInProgress)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\" Login\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row>\n    <b-col sm=8 offset=2>\n      <b-card\n        border-variant=\"primary\"\n        header=\"Login\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n        <b-alert variant=\"danger\" :show=\"alert\">{{alertMsg}}</b-alert>\n\n        <b-form @submit=\"login\">\n        <b-form-group\n          id=\"input-group-1\"\n          label=\"Your Free TON address:\"\n          label-for=\"input-1\"\n        >\n          <b-form-input\n            id=\"input-1\"\n            v-model=\"form.address\"\n            required\n            placeholder=\"Enter Free TON address\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-2\" label=\"Your Seed phrase:\" label-for=\"input-2\">\n          <b-form-input\n            id=\"input-2\"\n            v-model=\"form.seed\"\n            required\n            placeholder=\"Enter Seed phrase\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button\n          variant=\"primary\"\n          :disabled=\"loginInProgress\"\n          type=\"submit\"\n          >\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"loginInProgress\"></span>\n          Login</b-button>\n      </b-form>\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      form: {\n        address: '',\n        seed: ''\n      },\n      loginInProgress: false,\n      alert: false,\n      alertMsg: ''\n    }\n  },\n  methods: {\n    login (evt) {\n      evt.preventDefault()\n\n      this.loginInProgress = true\n\n      const _login = async () => {\n        try {\n          await this.$swapOrderbook.login(this.form.address, this.form.seed)\n          const loginInfo = await this.$swapOrderbook.updateInfo()\n          this.loginInProgress = false\n          this.$emit('logged', loginInfo, this.form.address, this.form.seed)\n        } catch (e) {\n          console.log('error', e)\n          this.alertMsg = 'Failed to login: ' + e.message.toString()\n          this.alert = true\n          await new Promise(resolve => setTimeout(resolve, 3000))\n          this.alert = false\n          this.alertMsg = ''\n          this.loginInProgress = false\n        }\n      }\n      _login()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=45b09312&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45b09312\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"8\",\"offset\":\"2\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"Withdraw\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.alert}},[_vm._v(_vm._s(_vm.alertMsg))]),_c('b-form',{on:{\"submit\":_vm.withdraw}},[_c('b-form-group',{attrs:{\"id\":\"input-group-1\",\"label\":\"Your Free TON address:\",\"label-for\":\"input-1\"}},[_c('b-form-input',{attrs:{\"id\":\"input-1\",\"required\":\"\",\"readonly\":\"\"},model:{value:(_vm.address),callback:function ($$v) {_vm.address=$$v},expression:\"address\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-3\",\"label\":\"Amount:\",\"label-for\":\"input-3\"}},[_c('b-form-input',{attrs:{\"id\":\"input-3\",\"max\":_vm.maxAmount,\"min\":\"0.000000001\",\"step\":\"0.000000001\",\"type\":\"number\",\"required\":\"\",\"placeholder\":\"Token amount\"},model:{value:(_vm.form.amount),callback:function ($$v) {_vm.$set(_vm.form, \"amount\", $$v)},expression:\"form.amount\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-2\",\"label\":\"Your Seed phrase:\",\"label-for\":\"input-2\"}},[_c('b-form-input',{attrs:{\"id\":\"input-2\",\"required\":\"\",\"placeholder\":\"Enter Seed phrase\"},model:{value:(_vm.form.seed),callback:function ($$v) {_vm.$set(_vm.form, \"seed\", $$v)},expression:\"form.seed\"}})],1),_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.withdrawInProgress,\"type\":\"submit\"}},[(_vm.withdrawInProgress)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\" Withdraw \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row>\n    <b-col sm=8 offset=2>\n      <b-card\n        border-variant=\"primary\"\n        header=\"Withdraw\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n        <b-alert variant=\"danger\" :show=\"alert\">{{alertMsg}}</b-alert>\n\n        <b-form @submit=\"withdraw\">\n        <b-form-group\n          id=\"input-group-1\"\n          label=\"Your Free TON address:\"\n          label-for=\"input-1\"\n        >\n          <b-form-input\n            id=\"input-1\"\n            v-model=\"address\"\n            required\n            readonly\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-3\" label=\"Amount:\" label-for=\"input-3\">\n          <b-form-input\n            id=\"input-3\"\n            v-model=\"form.amount\"\n            :max=\"maxAmount\"\n            min=\"0.000000001\"\n            step=\"0.000000001\"\n            type=\"number\"\n            required\n            placeholder=\"Token amount\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-2\" label=\"Your Seed phrase:\" label-for=\"input-2\">\n          <b-form-input\n            id=\"input-2\"\n            v-model=\"form.seed\"\n            required\n            placeholder=\"Enter Seed phrase\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button\n          variant=\"primary\"\n          :disabled=\"withdrawInProgress\"\n          type=\"submit\"\n          >\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"withdrawInProgress\"></span>\n          Withdraw\n        </b-button>\n      </b-form>\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['maxAmount', 'address'],\n  data () {\n    return {\n      form: {\n        seed: '',\n        amount: 0\n      },\n      withdrawInProgress: false,\n      alert: false,\n      alertMsg: ''\n    }\n  },\n  methods: {\n    withdraw (evt) {\n      evt.preventDefault()\n      this.withdrawInProgress = true\n\n      const _withdraw = async () => {\n        try {\n          await this.$swapOrderbook.withdraw(this.form.amount * 1000000000, this.form.seed)\n          const loginInfo = await this.$swapOrderbook.updateInfo()\n          this.withdrawInProgress = false\n          this.$emit('withdrawn', loginInfo)\n          return\n        } catch (e) {\n          console.log('withdraw error', e)\n          this.alertMsg = 'Failed to withdraw: ' + e.message.toString()\n          this.alert = true\n          await new Promise(resolve => setTimeout(resolve, 3000))\n          this.alert = false\n          this.alertMsg = ''\n          this.withdrawInProgress = false\n        }\n      }\n      _withdraw()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Withdraw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Withdraw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Withdraw.vue?vue&type=template&id=2fbf9f6c&scoped=true&\"\nimport script from \"./Withdraw.vue?vue&type=script&lang=js&\"\nexport * from \"./Withdraw.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fbf9f6c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"8\",\"offset\":\"2\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"Deposit (1 TON CRYSTAL of fee will be charged)\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.alert}},[_vm._v(_vm._s(_vm.alertMsg))]),_c('b-form',{on:{\"submit\":_vm.deposit}},[_c('b-form-group',{attrs:{\"id\":\"input-group-3\",\"label\":\"Amount:\",\"label-for\":\"input-3\"}},[_c('b-form-input',{attrs:{\"id\":\"input-3\",\"min\":\"0.000000001\",\"step\":\"0.000000001\",\"type\":\"number\",\"required\":\"\",\"placeholder\":\"Token amount\"},model:{value:(_vm.form.amount),callback:function ($$v) {_vm.$set(_vm.form, \"amount\", $$v)},expression:\"form.amount\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-2\",\"label\":\"Your Seed phrase:\",\"label-for\":\"input-2\"}},[_c('b-form-input',{attrs:{\"id\":\"input-2\",\"required\":\"\",\"placeholder\":\"Enter Seed phrase\"},model:{value:(_vm.form.seed),callback:function ($$v) {_vm.$set(_vm.form, \"seed\", $$v)},expression:\"form.seed\"}})],1),_c('b-button',{attrs:{\"variant\":\"primary\",\"type\":\"submit\",\"disabled\":_vm.depositInProgress}},[(_vm.depositInProgress)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\" Deposit \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row>\n    <b-col sm=8 offset=2>\n      <b-card\n        border-variant=\"primary\"\n        header=\"Deposit (1 TON CRYSTAL of fee will be charged)\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n        <b-alert variant=\"danger\" :show=\"alert\">{{alertMsg}}</b-alert>\n        <!--\n        <b-form-group\n          id=\"input-group-1\"\n          label=\"Transfer your funds to the address:\"\n          label-for=\"input-1\"\n        >\n        <b-form-textarea\n            id=\"input-1\"\n            v-model=\"depositAddress\"\n            readonly\n            rows=\"1\"\n            max-rows=\"3\"\n          ></b-form-textarea>\n        </b-form-group>\n        -->\n\n        <b-form @submit=\"deposit\">\n        <b-form-group id=\"input-group-3\" label=\"Amount:\" label-for=\"input-3\">\n          <b-form-input\n            id=\"input-3\"\n            v-model=\"form.amount\"\n            min=\"0.000000001\"\n            step=\"0.000000001\"\n            type=\"number\"\n            required\n            placeholder=\"Token amount\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-2\" label=\"Your Seed phrase:\" label-for=\"input-2\">\n          <b-form-input\n            id=\"input-2\"\n            v-model=\"form.seed\"\n            required\n            placeholder=\"Enter Seed phrase\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button\n          variant=\"primary\"\n          type=\"submit\"\n          :disabled=\"depositInProgress\"\n          >\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"depositInProgress\"></span>\n          Deposit\n        </b-button>\n      </b-form>\n\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['depositAddress', 'address'],\n  data () {\n    return {\n      depositInProgress: false,\n      alert: false,\n      alertMsg: '',\n      form: {\n        seed: '',\n        amount: 0\n      }\n    }\n  },\n  methods: {\n    deposit (evt) {\n      evt.preventDefault()\n      this.depositInProgress = true\n\n      const _deposit = async () => {\n        try {\n          await this.$swapOrderbook.deposit(this.form.amount * 1000000000, this.form.seed)\n          const loginInfo = await this.$swapOrderbook.updateInfo()\n          this.depositInProgress = false\n          this.$emit('deposited', loginInfo)\n          return\n        } catch (e) {\n          console.log('deposit error', e)\n          this.alertMsg = 'Failed to deposit: ' + e.message.toString()\n          this.alert = true\n          await new Promise(resolve => setTimeout(resolve, 3000))\n          this.alert = false\n          this.alertMsg = ''\n          this.depositInProgress = false\n        }\n      }\n      _deposit()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Deposit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Deposit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Deposit.vue?vue&type=template&id=365a535c&scoped=true&\"\nimport script from \"./Deposit.vue?vue&type=script&lang=js&\"\nexport * from \"./Deposit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"365a535c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"10\",\"offset\":\"1\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"Create new order\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\",\"title\":_vm.order.fromToken + ' to ' + _vm.order.toToken}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.alert}},[_vm._v(_vm._s(_vm.alertMsg))]),_c('b-form',{on:{\"submit\":_vm.createOrder}},[_c('b-form-group',{attrs:{\"id\":\"input-group-1\",\"label\":'Amount (' + _vm.order.fromToken + '):',\"label-for\":\"input-1\"}},[_c('b-form-input',{attrs:{\"id\":\"input-1\",\"max\":_vm.maxAmount(),\"min\":_vm.amountStep(),\"step\":_vm.amountStep(),\"type\":\"number\",\"required\":\"\",\"placeholder\":\"Token amount\"},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-2\",\"label\":'Exchange rate (price of 1 TON CRYSTAL):',\"label-for\":\"input-2\"}},[_c('b-form-input',{attrs:{\"id\":\"input-2\",\"min\":\"0.000000001\",\"step\":\"0.000000001\",\"type\":\"number\",\"required\":\"\",\"placeholder\":'Price in ' + _vm.order.altToken + ' for 1 TON CRYSTAL'},model:{value:(_vm.form.rate),callback:function ($$v) {_vm.$set(_vm.form, \"rate\", $$v)},expression:\"form.rate\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-3\",\"label\":'You will receive (' + _vm.order.toToken + '):',\"label-for\":\"input-3\"}},[_c('b-form-input',{attrs:{\"id\":\"input-3\",\"readonly\":\"\"},model:{value:(_vm.targetAmount),callback:function ($$v) {_vm.targetAmount=$$v},expression:\"targetAmount\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-4\",\"label\":_vm.order.fromToken === 'TON CRYSTAL' ?\n          'Your ' + _vm.targetCurrency + ' target address:' :\n          'Your ' + _vm.sourceCurrency + ' source address:',\"label-for\":\"input-4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-4\",\"required\":\"\"},model:{value:(_vm.form.initiatorAltAddress),callback:function ($$v) {_vm.$set(_vm.form, \"initiatorAltAddress\", $$v)},expression:\"form.initiatorAltAddress\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-5\",\"label\":'Timelock slot (funds will be blocked for a max of ' + _vm.maxLock + ' hours):',\"label-for\":\"input-5\"}},[_c('b-form-select',{attrs:{\"id\":\"input-5\",\"options\":_vm.timeSlots,\"required\":\"\"},model:{value:(_vm.form.timeSlot),callback:function ($$v) {_vm.$set(_vm.form, \"timeSlot\", $$v)},expression:\"form.timeSlot\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-6\",\"label\":'Minimum Amount (' + _vm.order.fromToken + '):',\"label-for\":\"input-6\"}},[_c('b-form-input',{attrs:{\"id\":\"input-6\",\"max\":Math.min(_vm.maxAmount(), _vm.amount),\"min\":_vm.amountStep(),\"step\":_vm.amountStep(),\"type\":\"number\",\"required\":\"\",\"placeholder\":\"Token amount\"},model:{value:(_vm.form.minAmount),callback:function ($$v) {_vm.$set(_vm.form, \"minAmount\", $$v)},expression:\"form.minAmount\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-7\",\"label\":\"Your Login Seed phrase:\",\"label-for\":\"input-7\"}},[_c('b-form-input',{attrs:{\"id\":\"input-7\",\"required\":\"\",\"placeholder\":\"Enter Login Seed phrase\"},model:{value:(_vm.form.seed),callback:function ($$v) {_vm.$set(_vm.form, \"seed\", $$v)},expression:\"form.seed\"}})],1),_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.createInProgress,\"type\":\"submit\"}},[(_vm.createInProgress)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\" Create \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row>\n    <b-col sm=10 offset=1>\n      <b-card\n        border-variant=\"primary\"\n        header=\"Create new order\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n        :title=\"order.fromToken + ' to ' + order.toToken\"\n      >\n        <b-alert variant=\"danger\" :show=\"alert\">{{alertMsg}}</b-alert>\n\n        <b-form @submit=\"createOrder\">\n\n        <b-form-group id=\"input-group-1\" :label=\"'Amount (' + order.fromToken + '):'\" label-for=\"input-1\">\n          <b-form-input\n            id=\"input-1\"\n            v-model=\"amount\"\n            :max=\"maxAmount()\"\n            :min=\"amountStep()\"\n            :step=\"amountStep()\"\n            type=\"number\"\n            required\n            placeholder=\"Token amount\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-2\" :label=\"'Exchange rate (price of 1 TON CRYSTAL):'\" label-for=\"input-2\">\n          <b-form-input\n            id=\"input-2\"\n            v-model=\"form.rate\"\n            min=\"0.000000001\"\n            step=\"0.000000001\"\n            type=\"number\"\n            required\n            :placeholder=\"'Price in ' + order.altToken + ' for 1 TON CRYSTAL'\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-3\" :label=\"'You will receive (' + order.toToken + '):'\" label-for=\"input-3\">\n          <b-form-input\n            id=\"input-3\"\n            v-model=\"targetAmount\"\n            readonly\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group\n          id=\"input-group-4\"\n          :label=\"order.fromToken === 'TON CRYSTAL' ?\n            'Your ' + targetCurrency + ' target address:' :\n            'Your ' + sourceCurrency + ' source address:'\"\n          label-for=\"input-4\"\n        >\n          <b-form-input\n            id=\"input-4\"\n            v-model=\"form.initiatorAltAddress\"\n            required\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-5\" :label=\"'Timelock slot (funds will be blocked for a max of ' + maxLock + ' hours):'\" label-for=\"input-5\">\n          <b-form-select\n            id=\"input-5\"\n            v-model=\"form.timeSlot\"\n            :options=\"timeSlots\"\n            required\n          ></b-form-select>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-6\" :label=\"'Minimum Amount (' + order.fromToken + '):'\" label-for=\"input-6\">\n          <b-form-input\n            id=\"input-6\"\n            v-model=\"form.minAmount\"\n            :max=\"Math.min(maxAmount(), amount)\"\n            :min=\"amountStep()\"\n            :step=\"amountStep()\"\n            type=\"number\"\n            required\n            placeholder=\"Token amount\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-7\" label=\"Your Login Seed phrase:\" label-for=\"input-7\">\n          <b-form-input\n            id=\"input-7\"\n            v-model=\"form.seed\"\n            required\n            placeholder=\"Enter Login Seed phrase\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button\n          variant=\"primary\"\n          :disabled=\"createInProgress\"\n          type=\"submit\"\n          >\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"createInProgress\"></span>\n          Create\n        </b-button>\n      </b-form>\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['order', 'address', 'maxTonAmount'],\n  data () {\n    return {\n      amount: 0,\n      form: {\n        seed: '',\n        minAmount: 0,\n        timeSlot: '4 Hours',\n        initiatorAltAddress: '',\n        rate: 1\n      },\n      sourceCurrency: '',\n      targetCurrency: '',\n      timeSlots: ['1 Hour', '4 Hours', '12 Hours', '24 Hours', '48 Hours'],\n      createInProgress: false,\n      alert: false,\n      alertMsg: ''\n    }\n  },\n  created () {\n    if (this.order.fromToken === 'TON CRYSTAL') {\n      this.amount = this.maxTonAmount\n      this.form.minAmount = this.maxTonAmount\n    } else {\n      this.amount = 0\n      this.form.minAmount = 0\n    }\n    this.sourceCurrency = this.$swapOrderbook.translateToken(this.order.fromToken)\n    this.targetCurrency = this.$swapOrderbook.translateToken(this.order.toToken)\n    console.log('new order created')\n  },\n  mounted () {\n    if (this.order.altToken === 'ETH' || this.order.altToken === 'USDT') {\n      this.$swapOrderbook.swappers.ETH.waitEthAddresses()\n        .then((addresses) => {\n          if (addresses[0] !== undefined && this.form.initiatorAltAddress === '') {\n            this.form.initiatorAltAddress = addresses[0]\n          }\n        })\n    }\n  },\n  watch: {\n    amount (amount) {\n      this.form.minAmount = Math.min(this.form.minAmount, amount)\n    }\n  },\n  computed: {\n    targetAmount () {\n      if (this.order.fromToken === 'TON CRYSTAL') {\n        return this.amount * this.form.rate\n      } else {\n        return this.amount / this.form.rate\n      }\n    },\n    maxLock () {\n      return this.lockTime() * 3\n    }\n  },\n  methods: {\n    lockTime () {\n      switch (this.form.timeSlot) {\n        case '1 Hour': return 1\n        case '4 Hours': return 4\n        case '12 Hours': return 12\n        case '24 Hours': return 24\n        case '48 Hours': return 48\n      }\n    },\n    maxAmount () {\n      if (this.order.fromToken === 'TON CRYSTAL') {\n        return this.maxTonAmount.toString()\n      }\n      return Number.MAX_VALUE.toString()\n    },\n    amountStep () {\n      if (this.order.fromToken === 'TON CRYSTAL') {\n        return '0.000000001'\n      } else if (this.order.fromToken === 'BTC') {\n        return '0.00000001'\n      } else if (this.order.fromToken === 'ETH') {\n        return '0.000000001' // actually ETH is divisible to 18 decimal places\n      } else if (this.order.fromToken === 'USDT') {\n        return '0.000001'\n      }\n      return '1'\n    },\n    createOrder (evt) {\n      evt.preventDefault()\n      this.createInProgress = true\n\n      const _create = async () => {\n        try {\n          const altToken = this.order.fromToken === 'TON CRYSTAL' ? this.order.toToken : this.order.fromToken\n          const order = await this.$swapOrderbook.ordersWatcher.newOrder()\n          await order.createOrder(\n            this.order.fromToken,\n            this.order.toToken,\n            this.$convertRate(altToken, this.form.rate),\n            this.$convertValue(this.order.fromToken, this.amount),\n            this.$convertValue(this.order.fromToken, this.form.minAmount),\n            this.lockTime() * 3600,\n            this.$convertAltAddress(altToken, this.form.initiatorAltAddress),\n            this.address,\n            this.form.seed)\n          const loginInfo = await this.$swapOrderbook.updateInfo()\n          this.createInProgress = false\n          this.$emit('orderCreated', loginInfo)\n        } catch (e) {\n          console.log('createOrder error', e)\n          this.alertMsg = 'Failed to create order: ' + e.message.toString()\n          this.alert = true\n          await new Promise(resolve => setTimeout(resolve, 3000))\n          this.alert = false\n          this.alertMsg = ''\n          this.createInProgress = false\n        }\n      }\n      _create()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewOrder.vue?vue&type=template&id=55696dd4&scoped=true&\"\nimport script from \"./NewOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./NewOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55696dd4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"10\",\"offset\":\"1\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"Confirm order\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\",\"title\":_vm.order.fromToken + ' to ' + _vm.order.toToken}},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":_vm.alert}},[_vm._v(_vm._s(_vm.alertMsg))]),_c('b-form',{on:{\"submit\":_vm.confirmOrder}},[_c('b-form-group',{attrs:{\"id\":\"input-group-1\",\"label\":'You want to buy (' + _vm.order.fromToken + '):',\"label-for\":\"input-1\"}},[_c('b-form-input',{attrs:{\"id\":\"input-1\",\"max\":_vm.foreignValue,\"min\":_vm.foreignMinValue,\"step\":_vm.amountStep(),\"type\":\"number\",\"required\":\"\",\"placeholder\":\"Token amount\"},model:{value:(_vm.form.value),callback:function ($$v) {_vm.$set(_vm.form, \"value\", $$v)},expression:\"form.value\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-2\",\"label\":'Exchange rate (price of 1 TON CRYSTAL):',\"label-for\":\"input-2\"}},[_c('b-form-input',{attrs:{\"id\":\"input-2\",\"required\":\"\",\"readonly\":\"\"},model:{value:(_vm.exchangeRate),callback:function ($$v) {_vm.exchangeRate=$$v},expression:\"exchangeRate\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-3\",\"label\":'You will pay (' + _vm.order.toToken + '):',\"label-for\":\"input-3\"}},[_c('b-form-input',{attrs:{\"id\":\"input-3\",\"readonly\":\"\"},model:{value:(_vm.targetValue),callback:function ($$v) {_vm.targetValue=$$v},expression:\"targetValue\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-4\",\"label\":_vm.order.direct ?\n          'Your ' + _vm.targetCurrency + ' source address:' :\n          'Your ' + _vm.sourceCurrency + ' target address:',\"label-for\":\"input-4\"}},[_c('b-form-input',{attrs:{\"id\":\"input-4\",\"required\":\"\"},model:{value:(_vm.form.recipientAltAddress),callback:function ($$v) {_vm.$set(_vm.form, \"recipientAltAddress\", $$v)},expression:\"form.recipientAltAddress\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-5\",\"label\":'Timelock slot (funds will be blocked for a max of ' + _vm.maxLock + ' hours):',\"label-for\":\"input-5\"}},[_c('b-form-input',{attrs:{\"id\":\"input-5\",\"required\":\"\",\"readonly\":\"\"},model:{value:(_vm.lockTime),callback:function ($$v) {_vm.lockTime=$$v},expression:\"lockTime\"}})],1),_c('b-form-group',{attrs:{\"id\":\"input-group-7\",\"label\":\"Your Login Seed phrase:\",\"label-for\":\"input-7\"}},[_c('b-form-input',{attrs:{\"id\":\"input-7\",\"required\":\"\",\"placeholder\":\"Enter Login Seed phrase\"},model:{value:(_vm.form.seed),callback:function ($$v) {_vm.$set(_vm.form, \"seed\", $$v)},expression:\"form.seed\"}})],1),_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":_vm.confirmInProgress,\"type\":\"submit\"}},[(_vm.confirmInProgress)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),_vm._v(\" Confirm \")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row>\n    <b-col sm=10 offset=1>\n      <b-card\n        border-variant=\"primary\"\n        header=\"Confirm order\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n        :title=\"order.fromToken + ' to ' + order.toToken\"\n      >\n        <b-alert variant=\"danger\" :show=\"alert\">{{alertMsg}}</b-alert>\n\n        <b-form @submit=\"confirmOrder\">\n\n        <b-form-group id=\"input-group-1\" :label=\"'You want to buy (' + order.fromToken + '):'\" label-for=\"input-1\">\n          <b-form-input\n            id=\"input-1\"\n            v-model=\"form.value\"\n            :max=\"foreignValue\"\n            :min=\"foreignMinValue\"\n            :step=\"amountStep()\"\n            type=\"number\"\n            required\n            placeholder=\"Token amount\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-2\" :label=\"'Exchange rate (price of 1 TON CRYSTAL):'\" label-for=\"input-2\">\n          <b-form-input\n            id=\"input-2\"\n            v-model=\"exchangeRate\"\n            required\n            readonly\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-3\" :label=\"'You will pay (' + order.toToken + '):'\" label-for=\"input-3\">\n          <b-form-input\n            id=\"input-3\"\n            v-model=\"targetValue\"\n            readonly\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group\n          id=\"input-group-4\"\n          :label=\"order.direct ?\n            'Your ' + targetCurrency + ' source address:' :\n            'Your ' + sourceCurrency + ' target address:'\"\n          label-for=\"input-4\"\n        >\n          <b-form-input\n            id=\"input-4\"\n            v-model=\"form.recipientAltAddress\"\n            required\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-5\" :label=\"'Timelock slot (funds will be blocked for a max of ' + maxLock + ' hours):'\" label-for=\"input-5\">\n          <b-form-input\n            id=\"input-5\"\n            v-model=\"lockTime\"\n            required\n            readonly\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group id=\"input-group-7\" label=\"Your Login Seed phrase:\" label-for=\"input-7\">\n          <b-form-input\n            id=\"input-7\"\n            v-model=\"form.seed\"\n            required\n            placeholder=\"Enter Login Seed phrase\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button\n          variant=\"primary\"\n          :disabled=\"confirmInProgress\"\n          type=\"submit\"\n          >\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"confirmInProgress\"></span>\n          Confirm\n        </b-button>\n      </b-form>\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['order', 'address', 'maxTonAmount'],\n  data () {\n    return {\n      form: {\n        seed: '',\n        value: 0,\n        recipientAltAddress: ''\n      },\n      sourceCurrency: '',\n      targetCurrency: '',\n      lockTime: 0,\n      confirmInProgress: false,\n      alert: false,\n      alertMsg: ''\n    }\n  },\n  created () {\n    console.log('created', this.order)\n    this.lockTime = this.$options.filters.formatHour(this.order.timeLockSlot, true) + ' Hour(s)'\n    this.sourceCurrency = this.$swapOrderbook.translateToken(this.order.fromToken)\n    this.targetCurrency = this.$swapOrderbook.translateToken(this.order.toToken)\n  },\n  mounted () {\n    let altToken\n    if (this.order.fromToken === 'TON CRYSTAL') {\n      altToken = this.order.toToken\n    } else {\n      altToken = this.order.fromToken\n    }\n    if (altToken === 'ETH' || altToken === 'USDT') {\n      this.$swapOrderbook.swappers.ETH.waitEthAddresses()\n        .then((addresses) => {\n          if (addresses[0] !== undefined && this.form.recipientAltAddress === '') {\n            this.form.recipientAltAddress = addresses[0]\n          }\n        })\n    }\n  },\n  computed: {\n    foreignValue () {\n      if (this.order.fromToken !== 'TON CRYSTAL') {\n        return this.$altValue(this.order.foreignValue, this.order.fromToken)\n      } else {\n        return this.$tonValue(this.order.value)\n      }\n    },\n    foreignMinValue () {\n      if (this.order.fromToken !== 'TON CRYSTAL') {\n        return this.$altValue(this.order.foreignMinValue, this.order.fromToken)\n      } else {\n        return this.$tonValue(this.order.minValue)\n      }\n    },\n    targetValue () {\n      if (this.order.fromToken === 'TON CRYSTAL') {\n        return this.$options.filters.formatAlt(this.form.value * this.$altValue(this.order.exchangeRate, this.order.toToken), this.order.toToken)\n      } else {\n        return this.$options.filters.formatTon(this.form.value / this.$altValue(this.order.exchangeRate, this.order.fromToken))\n      }\n    },\n    maxLock () {\n      return this.$options.filters.formatHour(this.order.timeLockSlot)\n    },\n    exchangeRate () {\n      console.log('rate', this.order.exchangeRate)\n      return this.$options.filters.formatAltHex(this.order.exchangeRate, this.order.fromToken === 'TON CRYSTAL' ? this.order.toToken : this.order.fromToken)\n    }\n  },\n  methods: {\n    amountStep () {\n      if (this.order.fromToken === 'TON CRYSTAL') {\n        return '0.000000001'\n      } else if (this.order.fromToken === 'BTC') {\n        return '0.00000001'\n      } else if (this.order.fromToken === 'ETH') {\n        return '0.000000001' // actually ETH is divisible to 18 decimal places\n      } else if (this.order.fromToken === 'USDT') {\n        return '0.000001'\n      }\n      return '1'\n    },\n    confirmOrder (evt) {\n      evt.preventDefault()\n      this.confirmInProgress = true\n\n      const _confirm = async () => {\n        try {\n          let tValue\n          if (this.order.fromToken === 'TON CRYSTAL') {\n            // const v = this.form.value * this.$altValue(this.order.exchangeRate, this.order.toToken)\n            const v = this.form.value\n            tValue = this.$convertValue('TON CRYSTAL', v)\n          } else {\n            const v = this.form.value / this.$altValue(this.order.exchangeRate, this.order.fromToken)\n            if (v * 1000000000 > this.$BigInt(this.maxTonAmount)) {\n              throw Error('Insufficient balance')\n            }\n            tValue = this.$convertValue('TON CRYSTAL', v)\n\n            const foreignValue = await this.$swapOrderbook.getAltValue(tValue, this.order.exchangeRate)\n            console.log('foreignValue', tValue, foreignValue, this.order.foreignValue, this.order.foreignMinValue)\n          }\n          const order = await this.$swapOrderbook.ordersWatcher.newOrder()\n          await order.confirmOrder(\n            this.order,\n            tValue,\n            this.form.recipientAltAddress,\n            this.address,\n            this.form.seed)\n          const loginInfo = await this.$swapOrderbook.updateInfo()\n          this.confirmInProgress = false\n          this.$emit('orderConfirmed', loginInfo)\n        } catch (e) {\n          console.log('confirmOrder error', e)\n          this.alertMsg = 'Failed to create order: ' + e.message.toString()\n          this.alert = true\n          await new Promise(resolve => setTimeout(resolve, 3000))\n          this.alert = false\n          this.alertMsg = ''\n          this.confirmInProgress = false\n        }\n      }\n      _confirm()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmOrder.vue?vue&type=template&id=4cabe6d0&scoped=true&\"\nimport script from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cabe6d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',{staticClass:\"mb-4\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":'BUY ' + _vm.token,\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[(_vm.loading || (!_vm.loading && _vm.orders.length === 0))?_c('b-card-text',[(_vm.loading)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),(!_vm.loading && _vm.orders.length === 0)?_c('span',[_vm._v(\"There are no orders yet\")]):_vm._e()]):_vm._e(),(_vm.logged)?_c('div',[_c('b-button',{staticClass:\"btn-primary float-left mb-2\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.createOrder}},[_vm._v(\"Create order\")])],1):_vm._e(),(!_vm.loading && _vm.orders.length > _vm.perPage)?_c('b-pagination',{staticClass:\"float-right\",attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"ordersTable\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}):_vm._e(),(!_vm.loading && _vm.orders.length > 0)?_c('b-table',{attrs:{\"id\":\"ordersTable\",\"hover\":\"\",\"items\":_vm.orders,\"fields\":_vm.fields,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(row){return [_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.swap(row.item, row.index)}}},[_vm._v(\" Swap \")])]}}],null,false,1774090124)}):_vm._e()],1)],1)],1),_c('b-row',{staticClass:\"mb-4\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":'SELL ' + _vm.token,\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[(_vm.loadingReversed || (!_vm.loadingReversed && _vm.ordersReversed.length === 0))?_c('b-card-text',[(_vm.loadingReversed)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),(!_vm.loadingReversed && _vm.ordersReversed.length === 0)?_c('span',[_vm._v(\"There are no orders yet\")]):_vm._e()]):_vm._e(),(_vm.logged)?_c('div',[_c('b-button',{staticClass:\"btn-primary float-left mb-2\",attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.createOrderReversed}},[_vm._v(\"Create order\")])],1):_vm._e(),(!_vm.loadingReversed && _vm.ordersReversed.length > _vm.perPage)?_c('b-pagination',{staticClass:\"float-right\",attrs:{\"total-rows\":_vm.rowsReversed,\"per-page\":_vm.perPage,\"aria-controls\":\"ordersTableReversed\"},model:{value:(_vm.currentPageReversed),callback:function ($$v) {_vm.currentPageReversed=$$v},expression:\"currentPageReversed\"}}):_vm._e(),(!_vm.loadingReversed && _vm.ordersReversed.length > 0)?_c('b-table',{attrs:{\"id\":\"ordersTableReversed\",\"hover\":\"\",\"items\":_vm.ordersReversed,\"fields\":_vm.fields,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPageReversed},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(row){return [(_vm.logged)?_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":function($event){return _vm.swap(row.item, row.index)}}},[_vm._v(\" Swap \")]):_vm._e()]}}],null,false,1611700561)}):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row class=\"mb-4\">\n    <b-col sm=12>\n      <b-card\n        border-variant=\"primary\"\n        :header=\"'BUY ' + token\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n      <b-card-text v-if=\"loading || (!loading && orders.length === 0)\">\n        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"loading\"></span>\n        <span v-if=\"!loading && orders.length === 0\">There are no orders yet</span>\n      </b-card-text>\n      <div v-if=\"logged\">\n        <b-button class=\"btn-primary float-left mb-2\" variant=\"primary\" @click=\"createOrder\">Create order</b-button>\n      </div>\n      <b-pagination\n        v-if=\"!loading && orders.length > perPage\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n        aria-controls=\"ordersTable\"\n        class=\"float-right\"\n      ></b-pagination>\n      <b-table\n        v-if=\"!loading && orders.length > 0\"\n        id=\"ordersTable\"\n        hover\n        :items=\"orders\"\n        :fields=\"fields\"\n        :per-page=\"perPage\"\n        :current-page=\"currentPage\"\n      >\n        <template v-slot:cell(actions)=\"row\">\n          <b-button size=\"sm\" @click=\"swap(row.item, row.index)\">\n            Swap\n          </b-button>\n        </template>\n      </b-table>\n      </b-card>\n    </b-col>\n  </b-row>\n  <b-row class=\"mb-4\">\n    <b-col sm=12>\n      <b-card\n        border-variant=\"primary\"\n        :header=\"'SELL ' + token\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n      <b-card-text v-if=\"loadingReversed || (!loadingReversed && ordersReversed.length === 0)\">\n        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"loadingReversed\"></span>\n        <span v-if=\"!loadingReversed && ordersReversed.length === 0\">There are no orders yet</span>\n      </b-card-text>\n      <div v-if=\"logged\">\n        <b-button class=\"btn-primary float-left mb-2\" variant=\"primary\" @click=\"createOrderReversed\">Create order</b-button>\n      </div>\n      <b-pagination\n        v-if=\"!loadingReversed && ordersReversed.length > perPage\"\n        v-model=\"currentPageReversed\"\n        :total-rows=\"rowsReversed\"\n        :per-page=\"perPage\"\n        aria-controls=\"ordersTableReversed\"\n        class=\"float-right\"\n      ></b-pagination>\n      <b-table\n        id=\"ordersTableReversed\"\n        v-if=\"!loadingReversed && ordersReversed.length > 0\"\n        hover\n        :items=\"ordersReversed\"\n        :fields=\"fields\"\n        :per-page=\"perPage\"\n        :current-page=\"currentPageReversed\"\n      >\n        <template v-slot:cell(actions)=\"row\">\n          <b-button v-if=\"logged\" size=\"sm\" @click=\"swap(row.item, row.index)\">\n            Swap\n          </b-button>\n        </template>\n      </b-table>\n    </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['logged', 'token'],\n  data () {\n    return {\n      loading: true,\n      loadingReversed: true,\n      fields: [\n        { key: 'rate', label: 'Exchange Rate' },\n        { key: 'amount', label: 'Amount Range' },\n        { key: 'lockTime', label: 'Timelock (Hours)' },\n        { key: 'actions', label: 'Actions' }],\n      orders: [],\n      ordersReversed: [],\n      currentPage: 1,\n      perPage: 6,\n      currentPageReversed: 1\n    }\n  },\n  mounted () {\n    console.log('OrderList mounted')\n    if (this.timerDirect) {\n      clearTimeout(this.timerDirect)\n      this.timerDirect = undefined\n    }\n    if (this.timerReversed) {\n      clearTimeout(this.timerReversed)\n      this.timerReversed = undefined\n    }\n    this.updateDirectOrderbook()\n    this.updateReversedOrderbook()\n  },\n  beforeDestroy () {\n    console.log('OrderList unmounted')\n    if (this.timerDirect) {\n      clearTimeout(this.timerDirect)\n      this.timerDirect = undefined\n    }\n    if (this.timerReversed) {\n      clearTimeout(this.timerReversed)\n      this.timerReversed = undefined\n    }\n  },\n  watch: {\n    token (t) {\n      this.loading = true\n      this.loadingReversed = true\n      if (this.timerDirect) {\n        clearTimeout(this.timerDirect)\n        this.timerDirect = undefined\n      }\n      if (this.timerReversed) {\n        clearTimeout(this.timerReversed)\n        this.timerReversed = undefined\n      }\n      this.updateDirectOrderbook()\n      this.updateReversedOrderbook()\n    }\n  },\n  computed: {\n    rows () {\n      return this.orders.length\n    },\n    rowsReversed () {\n      return this.ordersReversed.length\n    }\n  },\n  methods: {\n    updateDirectOrderbook () {\n      const token = this.token\n      if (!this.$swapOrderbook.isInited()) {\n        this.timerDirect = setTimeout(this.updateDirectOrderbook, 10000)\n        return\n      }\n      this.$swapOrderbook.getOrders('TON CRYSTAL', this.token)\n        .then((orders) => {\n          if (this.token !== token) {\n            return\n          }\n          console.log('getOrders:', orders)\n          this.orders = []\n          for (const i in orders) {\n            const order = orders[i]\n            const c = {\n              rate: this.$options.filters.formatAltHex(order.exchangeRate, this.token),\n              amount: order.value === order.minValue ? this.$options.filters.formatTonHex(order.value) : this.$options.filters.formatTonHex(order.minValue) + ' - ' + this.$options.filters.formatTonHex(order.value),\n              lockTime: this.$options.filters.formatHour(order.timeLockSlot),\n              order\n            }\n            this.orders.push(c)\n          }\n          // this.currentPage = 1\n          this.loading = false\n          this.timerDirect = setTimeout(this.updateDirectOrderbook, 30000)\n        })\n        .catch(e => {})\n    },\n    updateReversedOrderbook () {\n      const token = this.token\n      if (!this.$swapOrderbook.isInited()) {\n        this.timerReversed = setTimeout(this.updateReversedOrderbook, 10000)\n        return\n      }\n      this.$swapOrderbook.getOrders(this.token, 'TON CRYSTAL')\n        .then((orders) => {\n          if (this.token !== token) {\n            return\n          }\n          console.log('getOrders:', orders)\n          // this.ordersReversed = orders\n          this.ordersReversed = []\n          for (const i in orders) {\n            const order = orders[i]\n            const c = {\n              rate: this.$options.filters.formatAltHex(order.exchangeRate, this.token),\n              amount: order.foreignValue === order.foreignMinValue ? this.$options.filters.formatAltHex(order.foreignValue, this.token) : this.$options.filters.formatAltHex(order.foreignMinValue, this.token) + ' - ' + this.$options.filters.formatAltHex(order.foreignValue, this.token),\n              lockTime: this.$options.filters.formatHour(order.timeLockSlot),\n              order\n            }\n            this.ordersReversed.push(c)\n          }\n          // this.currentPageReversed = 1\n          this.loadingReversed = false\n          this.timerReversed = setTimeout(this.updateReversedOrderbook, 30000)\n        })\n        .catch(e => {})\n    },\n    createOrder () {\n      this.$emit('createOrder', 'TON CRYSTAL', this.token)\n    },\n    createOrderReversed () {\n      this.$emit('createOrder', this.token, 'TON CRYSTAL')\n    },\n    swap (order, index) {\n      console.log('swap', order, index)\n      this.$emit('confirmOrder', order.order)\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderList.vue?vue&type=template&id=5a4cd08c&scoped=true&\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a4cd08c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',{staticClass:\"mb-4\"},[_c('b-col',{attrs:{\"sm\":\"12\"}},[_c('b-card',{attrs:{\"border-variant\":\"primary\",\"header\":\"MY ORDERS\",\"header-bg-variant\":\"primary\",\"header-text-variant\":\"white\",\"align\":\"center\"}},[(_vm.loading || (!_vm.loading && _vm.orders.length === 0))?_c('b-card-text',[(_vm.loading)?_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e(),(!_vm.loading && _vm.orders.length === 0)?_c('span',[_vm._v(\"There are no orders yet\")]):_vm._e()]):_vm._e(),(!_vm.loading)?_c('div',[_c('b-button',{staticClass:\"btn-primary float-left mb-2\",attrs:{\"disabled\":_vm.freshing,\"variant\":\"primary\"},on:{\"click\":_vm.updateOrders}},[_vm._v(\"Refresh\")])],1):_vm._e(),(!_vm.loading && _vm.orders.length > _vm.perPage)?_c('b-pagination',{staticClass:\"float-right\",attrs:{\"total-rows\":_vm.rows,\"per-page\":_vm.perPage,\"aria-controls\":\"ordersTable\"},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}}):_vm._e(),(!_vm.loading && _vm.orders.length > 0)?_c('b-table',{attrs:{\"id\":\"ordersTable\",\"hover\":\"\",\"items\":_vm.orders,\"fields\":_vm.fields,\"per-page\":_vm.perPage,\"current-page\":_vm.currentPage},scopedSlots:_vm._u([{key:\"cell(actions)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-1 mb-1\",attrs:{\"size\":\"sm\",\"disabled\":!_vm.isClosePossible(row.item)},on:{\"click\":function($event){return _vm.close(row.item, row.index)}}},[_vm._v(\" Close \")]),_c('b-button',{attrs:{\"size\":\"sm\"},on:{\"click\":row.toggleDetails}},[_vm._v(\" \"+_vm._s(row.detailsShowing ? 'Hide' : 'Show')+\" Info \")])]}},{key:\"row-details\",fn:function(row){return [_c('b-card',{staticClass:\"text-sm-left\"},_vm._l((row.item.info),function(value,key){return _c('div',{key:key},[_vm._v(_vm._s(key)+\": \"),_c('span',{domProps:{\"innerHTML\":_vm._s(value)}}),_c('br')])}),0)]}}],null,false,991885298)}):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container>\n    <b-row class=\"mb-4\">\n    <b-col sm=12>\n      <b-card\n        border-variant=\"primary\"\n        header=\"MY ORDERS\"\n        header-bg-variant=\"primary\"\n        header-text-variant=\"white\"\n        align=\"center\"\n      >\n      <b-card-text v-if=\"loading || (!loading && orders.length === 0)\">\n        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\" v-if=\"loading\"></span>\n        <span v-if=\"!loading && orders.length === 0\">There are no orders yet</span>\n      </b-card-text>\n      <div v-if=\"!loading\">\n        <b-button :disabled=\"freshing\" class=\"btn-primary float-left mb-2\" variant=\"primary\" @click=\"updateOrders\">Refresh</b-button>\n      </div>\n      <b-pagination\n        v-if=\"!loading && orders.length > perPage\"\n        v-model=\"currentPage\"\n        :total-rows=\"rows\"\n        :per-page=\"perPage\"\n        aria-controls=\"ordersTable\"\n        class=\"float-right\"\n      ></b-pagination>\n      <b-table\n        v-if=\"!loading && orders.length > 0\"\n        id=\"ordersTable\"\n        hover\n        :items=\"orders\"\n        :fields=\"fields\"\n        :per-page=\"perPage\"\n        :current-page=\"currentPage\"\n      >\n        <template v-slot:cell(actions)=\"row\">\n          <b-button size=\"sm\" :disabled=\"!isClosePossible(row.item)\" @click=\"close(row.item, row.index)\" class=\"mr-1 mb-1\">\n            Close\n          </b-button>\n          <b-button size=\"sm\" @click=\"row.toggleDetails\">\n            {{ row.detailsShowing ? 'Hide' : 'Show' }} Info\n          </b-button>\n        </template>\n\n        <template v-slot:row-details=\"row\">\n          <b-card class=\"text-sm-left\">\n              <div v-for=\"(value, key) in row.item.info\" :key=\"key\">{{ key }}: <span v-html=\"value\"></span>\n              <br>\n              </div>\n          </b-card>\n        </template>\n\n      </b-table>\n      </b-card>\n    </b-col>\n  </b-row>\n  </b-container>\n\n</template>\n\n<script>\nexport default {\n  props: ['address'],\n  data () {\n    return {\n      loading: true,\n      freshing: false,\n      fields: [\n        { key: 'status', label: 'Status' },\n        { key: 'amount', label: 'Amount Range' },\n        { key: 'fromToken', label: 'From' },\n        { key: 'toToken', label: 'To' },\n        { key: 'rate', label: 'Exchange rate' },\n        { key: 'lockedUntil', label: 'Locked Until' },\n        { key: 'actions', label: 'Actions' }],\n      orders: [],\n      currentPage: 1,\n      perPage: 10\n    }\n  },\n  created () {\n    this.updateOrders()\n  },\n  mounted () {\n    console.log('MyOrders mounted')\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = undefined\n    }\n    this.updateOrders()\n  },\n  beforeDestroy () {\n    console.log('MyOrders unmounted')\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = undefined\n    }\n  },\n  computed: {\n    rows () {\n      return this.orders.length\n    }\n  },\n  methods: {\n    updateOrders () {\n      this.freshing = true\n      setTimeout(() => {\n        const list = this.$swapOrderbook.ordersWatcher.getOrders()\n        const newlist = []\n        for (const i in list) {\n          const order = list[i]\n          if (order.order !== undefined) {\n            const altToken = order.order.direct ? order.order.toToken : order.order.fromToken\n            console.log('order:', order)\n            const c = {\n              status: order.status,\n              rate: this.$options.filters.formatAltHex(order.order.exchangeRate, altToken),\n              fromToken: order.order.fromToken,\n              toToken: order.order.toToken,\n              lockedUntil: order.tonWithdrawUntil !== undefined ? this.$options.filters.formatTime(order.tonWithdrawUntil) : 'Wait for confirmation',\n              order: order,\n              info: {\n                Secret: order.secret,\n                'Secret hash': order.order.secretHash,\n                'Confirmation time': this.$options.filters.formatTime(order.confirmedTm)\n              }\n            }\n            if (order.order.confirmed) {\n              c.amount = this.$options.filters.formatTonHex(order.order.value)\n            } else {\n              if (order.order.direct) {\n                c.amount = order.order.value === order.order.minValue ? this.$options.filters.formatTonHex(order.order.value) : this.$options.filters.formatTonHex(order.order.minValue) + ' - ' + this.$options.filters.formatTonHex(order.order.value)\n              } else {\n                c.amount = order.order.foreignValue === order.order.foreignMinValue ? this.$options.filters.formatAltHex(order.order.foreignValue, altToken) : this.$options.filters.formatAltHex(order.order.foreignMinValue, altToken) + ' - ' + this.$options.filters.formatAltHex(order.order.foreignValue, altToken)\n              }\n            }\n            if (order.altCreateUntil) {\n              c.info[altToken + ' order creation until time'] = this.$options.filters.formatTime(order.altCreateUntil)\n            }\n            if (order.altWithdrawUntil) {\n              c.info[altToken + ' order withdraw until time'] = this.$options.filters.formatTime(order.altWithdrawUntil)\n            }\n            if (order.tonWithdrawUntil) {\n              c.info['TON order withdraw until time'] = this.$options.filters.formatTime(order.tonWithdrawUntil)\n            }\n\n            if (order.tonCreateTxId) {\n              c.info['TON order create TXID'] = this.$options.filters.makeTxLink(order.tonCreateTxId, 'TON CRYSTAL')\n              c.info['TON order create time'] = this.$options.filters.formatTime(order.tonCreateTxTm)\n            }\n            if (order.tonConfirmTxId) {\n              c.info['TON order confirm TXID'] = this.$options.filters.makeTxLink(order.tonConfirmTxId, 'TON CRYSTAL')\n              c.info['TON order confirm time'] = this.$options.filters.formatTime(order.tonConfirmTxTm)\n            }\n            if (order.altApproveTxId) {\n              c.info[altToken + ' order approve TXID'] = this.$options.filters.makeTxLink(order.altApproveTxId, altToken)\n              c.info[altToken + ' order approve time'] = this.$options.filters.formatTime(order.altApproveTxTm)\n            }\n            if (order.altTxId) {\n              c.info[altToken + ' order create TXID'] = this.$options.filters.makeTxLink(order.altTxId, altToken)\n              c.info[altToken + ' order create time'] = this.$options.filters.formatTime(order.altTxTm)\n            }\n            if (order.altFinishTxId) {\n              c.info[altToken + ' order withdraw TXID'] = this.$options.filters.makeTxLink(order.altFinishTxId, altToken)\n              c.info[altToken + ' order withdraw time'] = this.$options.filters.formatTime(order.altFinishTxTm)\n            }\n            if (order.tonFinishTxId) {\n              c.info['TON order withdraw TXID'] = this.$options.filters.makeTxLink(order.tonFinishTxId, 'TON CRYSTAL')\n              c.info['TON order withdraw time'] = this.$options.filters.formatTime(order.tonFinishTxTm)\n            }\n\n            for (const j in this.orders) {\n              if (this.orders[j].order &&\n                this.orders[j].order.order.secretHash !== undefined &&\n                c.order.order.secretHash !== undefined &&\n                this.orders[j].order.order.secretHash.toLowerCase() === c.order.order.secretHash.toLowerCase()) {\n                c._showDetails = this.orders[j]._showDetails\n                break\n              }\n            }\n            // console.log('c:', c)\n            newlist.push(c)\n          } else {\n            const c = {\n              status: order.status,\n              rate: '',\n              fromToken: '',\n              toToken: '',\n              lockedUntil: ''\n            }\n            console.log('c:', c)\n            newlist.push(c)\n          }\n        }\n        this.orders = newlist.reverse()\n        this.freshing = false\n        // this.currentPage = 1\n        this.loading = false\n        this.timer = setTimeout(this.updateOrders, 10000)\n      }, 0)\n    },\n    close (order, index) {\n      console.log('close', order, index)\n      const seed = prompt('Enter a Free TON wallet seed phrase')\n      this.$swapOrderbook.closeOrder(order.order.order, seed)\n        .then((res) => {\n          this.updateOrders()\n        })\n      // this.$emit('closeOrder', order)\n    },\n    isClosePossible (order) {\n      return order.status === 'created'\n    }\n    /*,\n    createOrder () {\n      this.$emit('createOrder', 'TON CRYSTAL', this.token)\n    },\n    createOrderReversed () {\n      this.$emit('createOrder', this.token, 'TON CRYSTAL')\n    },\n    swap (order, index) {\n      console.log('swap', order, index)\n      this.$emit('confirmOrder', order)\n    } */\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyOrders.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MyOrders.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MyOrders.vue?vue&type=template&id=15a2cfa8&scoped=true&\"\nimport script from \"./MyOrders.vue?vue&type=script&lang=js&\"\nexport * from \"./MyOrders.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15a2cfa8\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n\n  <b-alert id=\"alert\" :show=\"alert\">Swap operation in progress, please do not close this tab</b-alert>\n\n  <b-navbar id=\"navbar\" :class=\"[ isLogged ? '' : 'mb-20' ]\" toggleable=\"sm\" type=\"dark\" variant=\"primary\" sticky>\n    <b-navbar-brand href=\"#\">Free TON Atomic Swaps <sup>demo</sup></b-navbar-brand>\n\n    <b-navbar-toggle target=\"nav-collapse\"></b-navbar-toggle>\n\n    <b-collapse id=\"nav-collapse\" is-nav>\n      <b-navbar-nav class=\"ml-auto\" right>\n        <b-nav-item href=\"#\" @click=\"eth\" :active=\"tab === 'eth'\">ETH</b-nav-item>\n        <b-nav-item href=\"#\" @click=\"usdt\" :active=\"tab === 'usdt'\">USDT</b-nav-item>\n        <b-nav-item href=\"#\" @click=\"btc\" :active=\"tab === 'btc'\">BTC</b-nav-item>\n        <b-nav-item href=\"#\" @click=\"orders\" v-if=\"isLogged\" :active=\"tab === 'orders'\">ORDERS</b-nav-item>\n        <b-nav-item href=\"#\" @click=\"login\" v-if=\"!isLogged\" :active=\"tab === 'login'\">LOGIN</b-nav-item>\n        <b-nav-item href=\"#\" @click=\"logout\" v-if=\"isLogged\">LOGOUT</b-nav-item>\n      </b-navbar-nav>\n    </b-collapse>\n  </b-navbar>\n\n  <b-navbar v-if=\"isLogged\" class=\"mb-20\" id=\"navbar\" toggleable=\"sm\" type=\"dark\" variant=\"light\" sticky>\n    <span class=\"mr-2\">\n      Free: {{balance.freeFunds | formatTonHex}}\n    </span>\n    <span class=\" ml-2 mr-2\">\n      In Orders: {{balance.ordersFunds | formatTonHex}}\n    </span>\n    <span class=\" ml-2 mr-2\">\n      Locked: {{balance.lockedFunds | formatTonHex}}\n    </span>\n    <b-navbar-nav class=\"ml-auto\" right>\n        <b-button class=\"ml-2\" href=\"#\" variant=\"primary\" @click=\"deposit\" left>Deposit</b-button>\n        <b-button class=\"ml-2\" href=\"#\" variant=\"primary\" @click=\"withdraw\" left :disabled=\"balance.freeFunds === '0x0'\">Withdraw</b-button>\n      </b-navbar-nav>\n  </b-navbar>\n\n  <span class=\"border\">\n\n  </span>\n\n  <Login\n    v-if=\"tab === 'login'\"\n    v-on:logged=\"logged\"\n  />\n\n  <Withdraw\n    v-if=\"tab === 'withdraw'\"\n    v-on:withdrawn=\"withdrawn\"\n    :address=\"address\"\n    :maxAmount=\"balance.freeFunds\"\n  />\n\n  <Deposit\n    v-if=\"tab === 'deposit'\"\n    v-on:deposited=\"deposited\"\n    :address=\"address\"\n    :depositAddress=\"depositAddress\"\n  />\n\n  <NewOrder\n    v-if=\"tab === 'newOrder'\"\n    v-on:orderCreated=\"orderCreated\"\n    :address=\"address\"\n    :maxTonAmount=\"balance.freeFunds\"\n    :order=\"newOrder\"\n  />\n\n  <ConfirmOrder\n    v-if=\"tab === 'confirmOrder'\"\n    v-on:orderConfirmed=\"orderConfirmed\"\n    :address=\"address\"\n    :maxTonAmount=\"balance.freeFunds\"\n    :order=\"newOrderConfirm\"\n  />\n\n  <OrderList\n    v-if=\"tab === 'eth' || tab === 'usdt' || tab === 'btc'\"\n    :logged=\"isLogged\"\n    :token=\"orderList.token\"\n    v-on:createOrder=\"createOrder\"\n    v-on:confirmOrder=\"confirmOrder\"\n  />\n\n  <MyOrders\n    v-if=\"tab === 'orders'\"\n    :address=\"address\"\n  />\n\n  <!--\n  <footer id=\"footer\" class=\"py-4 bg-dark text-white-50 mt-auto\">\n    <div class=\"container text-center\">\n      <small>Copyright &copy;</small>\n    </div>\n  </footer>\n  -->\n  </div>\n</template>\n\n<script>\nimport Login from './components/Login.vue'\nimport Withdraw from './components/Withdraw.vue'\nimport Deposit from './components/Deposit.vue'\nimport NewOrder from './components/NewOrder.vue'\nimport ConfirmOrder from './components/ConfirmOrder.vue'\nimport OrderList from './components/OrderList.vue'\nimport MyOrders from './components/MyOrders.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Login,\n    Withdraw,\n    Deposit,\n    NewOrder,\n    ConfirmOrder,\n    OrderList,\n    MyOrders\n  },\n  data () {\n    return {\n      alert: false,\n      isLogged: false,\n      address: '',\n      seed: '',\n      balance: {\n        freeFunds: '0x0',\n        ordersFunds: '0x0',\n        lockedFunds: '0x0'\n      },\n      newOrder: {\n        fromToken: '',\n        toToken: '',\n        altToken: '',\n        sourceCurrency: '',\n        targetCurrency: ''\n      },\n      orderList: {\n        token: 'USDT'\n      },\n      newOrderConfirm: {},\n      depositAddress: '0:d0032ed616eac41c8a5924c00e64e18b5083316e888bb9b5b34c4e32a9365f1d',\n      tab: 'usdt'\n    }\n  },\n  mounted () {\n    this.$swapOrderbook.init()\n      .then(() => {\n        const checkBalance = async () => {\n          while (true) {\n            if (this.isLogged) {\n              if (!this.$swapOrderbook.ordersWatcher.isInited()) {\n                this.$swapOrderbook.ordersWatcher.init(this.address, this.seed)\n              }\n              if (this.$swapOrderbook.ordersWatcher.isAnyActive()) {\n                this.alert = true\n              } else {\n                this.alert = false\n              }\n              try {\n                this.balance = await this.$swapOrderbook.updateInfo()\n              } catch (e) {\n                console.log('updateInfo error:', e)\n              }\n            }\n            await new Promise(resolve => setTimeout(resolve, 20000))\n          }\n        }\n        checkBalance()\n      })\n      .catch((e) => {\n        console.log('init error:', e)\n      })\n  },\n  methods: {\n    login () {\n      if (this.tab !== 'login') {\n        this.tab = 'login'\n      }\n    },\n    logout () {\n      this.$swapOrderbook.logout()\n      this.isLogged = false\n      this.balance = {}\n      if (this.tab !== 'eth' && this.tab !== 'usdt' && this.tab !== 'btc') {\n        this.login()\n      }\n    },\n    logged (info, address, seed) {\n      this.isLogged = true\n      this.balance = info\n      this.address = address\n      this.seed = seed\n      console.log('login info:', info, address)\n      if (!this.$swapOrderbook.ordersWatcher.isInited()) {\n        this.$swapOrderbook.ordersWatcher.init(address, seed)\n      }\n      if (this.$swapOrderbook.ordersWatcher.isAnyActive()) {\n        this.alert = true\n      } else {\n        this.alert = false\n      }\n      this.usdt()\n    },\n    eth () {\n      // this.createOrder('TON CRYSTAL', 'ETH')\n      // this.createOrder('TON CRYSTAL', 'USDT')\n      this.orderList.token = 'ETH'\n      this.tab = 'eth'\n    },\n    usdt () {\n      // this.createOrder('TON CRYSTAL', 'USDT')\n      // this.createOrder('USDT', 'TON CRYSTAL')\n      // this.$swapOrderbook.getOrder()\n      //  .then((order) => {\n      //    this.confirmOrder(order)\n      //  })\n      this.orderList.token = 'USDT'\n      this.tab = 'usdt'\n    },\n    btc () {\n      // this.createOrder('TON CRYSTAL', 'BTC')\n      this.orderList.token = 'BTC'\n      this.tab = 'btc'\n    },\n    orders () {\n      this.tab = 'orders'\n      console.log('orders')\n    },\n    deposit () {\n      this.tab = 'deposit'\n      console.log('deposit')\n    },\n    deposited (info) {\n      this.balance = info\n      this.usdt()\n    },\n    withdraw () {\n      this.tab = 'withdraw'\n      console.log('withdraw')\n    },\n    withdrawn (info) {\n      this.balance = info\n      this.usdt()\n    },\n    createOrder (from, to) {\n      this.newOrder.fromToken = from\n      this.newOrder.toToken = to\n      if (from === 'TON CRYSTAL') {\n        this.newOrder.altToken = to\n      } else {\n        this.newOrder.altToken = from\n      }\n      this.tab = 'newOrder'\n    },\n    orderCreated (info) {\n      this.balance = info\n      this.orders()\n    },\n    confirmOrder (order) {\n      this.newOrderConfirm = order\n      this.tab = 'confirmOrder'\n    },\n    orderConfirmed (info) {\n      this.balance = info\n      this.orders()\n    }\n  }\n}\n</script>\n\n<style>\n /*\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n*/\n#alert {\n  text-align: center;\n  margin-bottom: 0;\n}\n\n#footer {\n  margin-top: 20px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3be05e15&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport { BootstrapVue } from 'bootstrap-vue'\nimport App from './App.vue'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\nimport { BigInteger } from 'javascript-biginteger'\nimport numeral from 'numeral'\n\nimport TonSwapOrderbook from 'tonswaplib'\n\nVue.prototype.$swapOrderbook = new TonSwapOrderbook('0:661a85a4912ff3a1994bc4e7039ca9f14f9d8e24bb3910d657c998a931739fb3')\nVue.prototype.$BigInt = BigInteger\n\nVue.use(BootstrapVue)\nVue.config.productionTip = false\nVue.filter('formatTon', function (value) {\n  return numeral(value).format('0,0.00')\n})\nVue.filter('formatTonHex', function (value) {\n  value = BigInteger(value).quotient(1000000).toJSValue() / 1000\n  return numeral(value).format('0,0.00')\n})\nVue.filter('formatHour', function (value, slot = false) {\n  if (slot) {\n    value = parseInt(value, 16) / 3600\n  } else {\n    value = parseInt(value, 16) * 3 / 3600\n  }\n  return numeral(value).format('0.0')\n})\nVue.filter('formatTime', function (value) {\n  if (!value) {\n    return ''\n  }\n  return new Date(value * 1000).toISOString().slice(-24, -5).replace('T', ' ') + ' UTC'\n})\nVue.filter('makeTxLink', function (txid, token) {\n  if (token === 'TON CRYSTAL') {\n    return '<a href=\"https://net.ton.live/transactions?section=details&id=' + txid + '\" >' + txid + '</a>'\n  } else if (token === 'ETH' || token === 'USDT') {\n    return '<a href=\"https://ropsten.etherscan.io/tx/' + txid + '\" >' + txid + '</a>'\n  }\n  return txid\n})\nVue.filter('formatAltHex', function (value, altToken) {\n  if (altToken === 'ETH') {\n    value = BigInteger(value).quotient(1000000000000).toJSValue() / 1000000\n    return numeral(value).format('0,0.00000')\n  } else if (altToken === 'USDT') {\n    value = BigInteger(value).quotient(1000).toJSValue() / 1000\n    return numeral(value).format('0,0.00')\n  } else if (altToken === 'BTC') {\n    value = BigInteger(value).toJSValue() / 100000000\n    return numeral(value).format('0,0.0000000')\n  }\n  return '0'\n})\nVue.filter('formatAlt', function (value, altToken) {\n  if (altToken === 'ETH') {\n    return numeral(value).format('0,0.00000')\n  } else if (altToken === 'USDT') {\n    return numeral(value).format('0,0.00')\n  } else if (altToken === 'BTC') {\n    return numeral(value).format('0,0.0000000')\n  }\n  return '0'\n})\n\nVue.prototype.$altValue = (value, altToken) => {\n  if (altToken === 'ETH') {\n    return BigInteger(value).quotient(1000000000000).toJSValue() / 1000000\n  } else if (altToken === 'USDT') {\n    return BigInteger(value).quotient(1000).toJSValue() / 1000\n  } else if (altToken === 'BTC') {\n    return BigInteger(value).toJSValue() / 100000000\n  }\n  return 0\n}\n\nVue.prototype.$tonValue = (value) => {\n  return BigInteger(value).quotient(1000000).toJSValue() / 1000\n}\n\nVue.prototype.$convertValue = (fromToken, value) => {\n  if (fromToken === 'TON CRYSTAL') {\n    // to nano\n    return '0x' + BigInteger(value * 1000000000).toString(16)\n  } else if (fromToken === 'ETH') {\n    // to wei\n    return '0x' + BigInteger(value * 1000000000).multiply(1000000000).toString(16)\n  } else if (fromToken === 'USDT') {\n    return '0x' + BigInteger(value * 1000000).toString(16)\n  } else if (fromToken === 'BTC') {\n    // to satoshi\n    return '0x' + BigInteger(value * 100000000).toString(16)\n  }\n  return '0x0'\n}\n\nVue.prototype.$convertRate = (altToken, rate) => {\n  if (altToken === 'ETH') {\n    // to wei\n    return '0x' + BigInteger(rate * 1000000000).multiply(1000000000).toString(16)\n  } else if (altToken === 'USDT') {\n    return '0x' + BigInteger(rate * 1000000).toString(16)\n  } else if (altToken === 'BTC') {\n    // to satoshi\n    return '0x' + BigInteger(rate * 100000000).toString(16)\n  }\n  return '0x0'\n}\n\nVue.prototype.$convertAltAddress = (altToken, addr) => {\n  if (altToken === 'ETH') {\n    return addr\n  } else if (altToken === 'USDT') {\n    return addr\n  } else if (altToken === 'BTC') {\n    // to satoshi\n    return '0x0' // TODO\n  }\n  return '0x0'\n}\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","const WalletAbi = require('./WalletAbi')\nconst { BigInteger } = require('javascript-biginteger');\n\nclass Wallet {\n  constructor (client) {\n      this.client = client\n      this.abi = WalletAbi\n  }\n\n  async runSmcMethod (functionName, input={}, keys) {\n    console.log('wallet runSmcMethod');\n    console.log('address', this.smcAddress);\n    console.log('abi', this.TonSwapOrderbookAbi);\n    console.log('functionName', functionName);\n    console.log('input', input);\n    console.log('keys', keys);\n    const res = await this.client.contracts.run({\n      address: this.address,\n      abi: this.abi,\n      functionName,\n      input: input,\n      keyPair: keys,\n    });\n    console.log('output', res);\n    return res;\n  }\n\n  async runGetMethod (functionName, input={}) {\n    console.log('wallet runGetMethod');\n    console.log('address', this.smcAddress);\n    console.log('abi', this.TonSwapOrderbookAbi);\n    console.log('functionName', functionName);\n    console.log('input', input);\n    const res = await this.client.contracts.runLocal({\n      address: this.address,\n      abi: this.abi,\n      functionName,\n      fullRun: false,\n      input: input\n    });\n    console.log('output', res);\n    return res.output;\n  }\n  \n  async login (address, seed) {\n\n    try {\n      const HD_PATH = \"m/44'/396'/0'/0/0\"\n      this.keyPair = await this.client.crypto.mnemonicDeriveSignKeys({\n                  dictionary: 1,\n                  wordCount: 12,\n                  phrase: seed,\n                  path: HD_PATH\n              })\n\n      console.log(`Tonos-compatible key pair:`)\n      console.log(this.keyPair)\n    } catch (e) {\n      throw Error('Invalid seed phrase')\n    }\n\n    this.address = address\n    this.seed = seed\n\n    try {\n      const output = await this.runGetMethod('getCustodians')\n      for (let c in output.custodians) {\n        const custodian = output.custodians[c].pubkey\n        console.log('custodian', custodian)\n        if (BigInteger('0x' + this.keyPair.public).compare(custodian) === 0) {\n          console.log('found custodian')\n          return\n        }\n      }\n    } catch (e) {\n      throw Error('Cannot get account state')\n    }\n    throw Error('No such custodian')\n  }\n\n  /**\n   * @returns {string}\n   */\n  getAddress() {\n    return this.address\n  }\n\n  /**\n   * \n   * @param {string|number} value Value to send in TON nanoCRYSTALS\n   * @param {string} destAddress Destination address\n   * @param {string} payload BOC payload\n   */\n  async transact(value, destAddress, payload='') {\n    /*\n    tonos-cli call <multisig_address> submitTransaction \n    '{\"dest\":\"raw_address\",\"value\":<nanotokens>\n    \"bounce\":true,\"allBalance\":false,\"payload\":\"\"}' --abi <MultisigWallet.abi.json> --sign <seed_or_keyfile>\n    */\n    const res = await this.runSmcMethod('submitTransaction',\n      {\n        dest: destAddress,\n        value,\n        bounce: true,\n        allBalance: false,\n        payload: payload\n      },\n      this.keyPair)\n    const output = {\n      'transaction_id': res.transaction.id,\n      'fees': res.fees.totalAccountFees,\n      'output': res.fees.totalOutput\n    }\n    return output\n  }\n\n  async getAccount(address) {\n    address = address || this.address\n    const res = await this.client.contracts.getAccount(address, true)\n    console.log('getAccount', res)\n    return res\n  }\n\n}\n\nmodule.exports = Wallet","const EthSwap = require('./swaps/EthSwap');\nconst Web3 = require(\"web3\");\nconst { testnet_config } = require('./configs.js');\n\nconst ethInit = () => {\n  if (typeof window !== 'undefined' && window.ethereum) {\n    window.web3 = new Web3(window.ethereum);\n  }\n}\n\nconst ethEnabled = () => {\n    if (typeof window !== 'undefined' && window.ethereum) {\n        window.web3 = new Web3(window.ethereum);\n        window.ethereum.enable();\n        return true;\n    }\n    return false;\n}\n\nconst ethGetAddresses = async () => {\n    return await window.web3.eth.getAccounts();\n}\n\nconst waitEthAddresses = async () => {\n\n    while (!ethEnabled()) {\n        await new Promise(resolve => setTimeout(resolve, 1000));\n    }\n\n    while((await ethGetAddresses()).length === 0) {\n        await new Promise(resolve => setTimeout(resolve, 5000));\n    }\n\n    let addresses = await ethGetAddresses();\n    console.log('ethereum addresses', addresses);\n    return addresses;\n}\n\n\nclass EthSwapInitiator {\n    constructor(sourceAddress, targetAddress, secretHash, config) {\n        \n        this.sourceAddress = sourceAddress;\n        this.targetAddress = targetAddress;\n        this.secretHash = secretHash;\n        this.config = config || testnet_config\n\n        this.swap = new EthSwap({\n            mainnet: this.config.isMainnet,\n            address: this.config.contracts.eth_address,\n            abi: this.config.contracts.eth_abi,\n            gasLimit: 3e5,\n            gasPrice: 2e9,\n            getParticipantAddress: () => sourceAddress\n        });\n\n    }\n\n    async create(amount) {\n        if (this.transactionHash || this.swapObj) {\n            throw Error('Already created');\n        }\n        \n        this.amount = amount\n\n        try {\n            await this.swap.create({\n                    secretHash: this.secretHash,\n                    participantAddress: this.targetAddress,\n                    amount: this.amount\n                },\n                (transactionHash) => {this.transactionHash = transactionHash;}\n            );\n            console.log('_transactionHash', this.transactionHash);\n        } catch (e) {\n            console.log('error create', e);\n            throw Error('Cannot send Ethereum transaction')\n        }\n\n        return this.transactionHash;\n    }\n\n    async withdrawWithTimeout() {\n      try {\n        const result = await this.swap.refund({\n          participantAddress: this.targetAddress\n        });\n        console.log('withdrawWithTimeout result', result);\n        return result;\n      } catch (e) {\n        throw Error('Cannot withdraw')\n      }\n    }\n    \n    async getSwap() {\n\n      this.swapObj = await this.swap.swaps({\n          ownerAddress: this.sourceAddress,\n          participantAddress: this.targetAddress\n      });\n      console.log('swapObj', this.swapObj);\n      return this.swapObj;\n\n    }\n\n    async getMyBalance() {\n        let bl = await this.swap.fetchBalance(this.sourceAddress);\n        console.log('sourceAddress balance', bl);\n        return bl;\n    }\n\n    async getGasPrice(speed='fast') {\n        let gasPrice = await this.swap.estimateGasPrice(speed);\n        console.log('gasPrice', gasPrice.toString(10));\n        return gasPrice;\n    }\n}\n\n\nclass EthSwapReceiver {\n    constructor(sourceAddress, targetAddress, secret, secretHash, config) {\n        \n        this.sourceAddress = sourceAddress;\n        this.targetAddress = targetAddress;\n        this.secret = secret;\n        this.secretHash = secretHash;\n        this.config = config || testnet_config\n\n        this.swap = new EthSwap({\n            mainnet: this.config.isMainnet,\n            address: this.config.contracts.eth_address,\n            abi: this.config.contracts.eth_abi,\n            gasLimit: 3e5,\n            gasPrice: 2e9,\n            getParticipantAddress: () => targetAddress\n        });\n\n    }\n\n    async checkSwapParams(swap) {\n        if (swap.balance !== this.value)\n            return false;\n    }\n\n    async getSwap() {\n\n      this.swapObj = await this.swap.swaps({\n          ownerAddress: this.sourceAddress,\n          participantAddress: this.targetAddress\n      });\n      console.log('swapObj', this.swapObj);\n      return this.swapObj;\n\n    }\n\n    async withdraw() {\n\n      try {\n          let receipt = await this.swap.withdraw({\n                  secret: this.secret,\n                  ownerAddress: this.sourceAddress\n              },\n              (transactionHash) => {this.transactionHash = transactionHash;}\n          );\n          console.log('receipt:', receipt);\n          return this.transactionHash;\n      } catch (e) {\n          console.log('withdraw error:', e);\n          throw Error('Withdraw error')\n      }\n\n    }\n\n    async getMyBalance() {\n        let bl = await this.swap.fetchBalance(this.targetAddress);\n        console.log('sourceAddress balance', bl);\n        return bl;\n    }\n\n    async getGasPrice(speed='fast') {\n        let gasPrice = await this.swap.estimateGasPrice(speed);\n        console.log('gasPrice', gasPrice.toString(10));\n        return gasPrice;\n    }\n}\n\nmodule.exports = {ethInit, ethEnabled, waitEthAddresses, EthSwapInitiator, EthSwapReceiver};","const EthTokenSwap = require('./swaps/EthTokenSwap');\nconst Web3 = require(\"web3\");\nconst { testnet_config } = require('./configs.js');\n\n\nclass EthTokenSwapInitiator {\n    constructor(token, sourceAddress, targetAddress, secretHash, config) {\n        \n        this.sourceAddress = sourceAddress;\n        this.targetAddress = targetAddress;\n        this.secretHash = secretHash;\n        this.config = config || testnet_config\n        this.tokenAddress = this.config.tokens[token].address\n        this.token = token\n\n        this.swap = new EthTokenSwap({\n            mainnet: this.config.isMainnet,\n            address: this.config.contracts.eth_token_address,\n            abi: this.config.contracts.eth_token_abi,\n            name: token,\n            decimals: this.config.tokens[token].decimals,\n            tokenAddress: this.config.tokens[token].address,\n            tokenAbi: this.config.tokens[token].abi,\n            gasLimit: 4e5,\n            gasPrice: 2e9,\n            getParticipantAddress: () => sourceAddress\n        });\n\n    }\n\n    async create(amount) {\n        if (this.transactionHash || this.swapObj) {\n            throw Error('Already created');\n        }\n\n        this.amount = amount\n        \n        try {\n            await this.swap.create({\n                    secretHash: this.secretHash,\n                    participantAddress: this.targetAddress,\n                    amount: this.amount\n                },\n                (transactionHash) => {this.transactionHash = transactionHash;}\n            );\n            console.log('_transactionHash', this.transactionHash);\n        } catch (e) {\n            console.log('error create', e);\n            throw Error('Cannot send Ethereum transaction')\n        }\n\n        return this.transactionHash;\n    }\n\n    async withdrawWithTimeout() {\n      try {\n        const result = await this.swap.refund({\n          participantAddress: this.targetAddress\n        });\n        console.log('withdrawWithTimeout result', result);\n        return result;\n      } catch (e) {\n        throw Error('Cannot withdraw')\n      }\n    }\n\n    async getSwap() {\n\n      this.swapObj = await this.swap.swaps({\n          ownerAddress: this.sourceAddress,\n          participantAddress: this.targetAddress\n      });\n      console.log('swapObj', this.swapObj);\n      return this.swapObj;\n\n    }\n\n    async approve(amount) {\n      try {\n        const result = await this.swap.approve({\n          amount: amount\n        });\n        console.log('approve result', result);\n        return result ? result.transactionHash : undefined;\n      } catch (e) {\n        throw Error('Cannot approve')\n      }\n    }\n\n    async checkApprove() {\n      try {\n        const result = await this.swap.checkAllowance({\n          spender: this.sourceAddress\n        });\n        console.log('checkApprove result', result);\n        return result;\n      } catch (e) {\n        throw Error('Cannot checkApprove')\n      }\n    }\n\n    async getMyBalance() {\n        let bl = await this.swap.fetchBalance(this.sourceAddress);\n        console.log('sourceAddress balance', bl);\n        return bl;\n    }\n\n    async getGasPrice(speed='fast') {\n        let gasPrice = await this.swap.estimateGasPrice(speed);\n        console.log('gasPrice', gasPrice.toString(10));\n        return gasPrice;\n    }\n}\n\n\nclass EthTokenSwapReceiver {\n    constructor(token, sourceAddress, targetAddress, secret, secretHash, config) {\n        \n        this.sourceAddress = sourceAddress;\n        this.targetAddress = targetAddress;\n        this.secret = secret;\n        this.secretHash = secretHash;\n        this.config = config || testnet_config\n        this.tokenAddress = this.config.tokens[token].address\n        this.token = token\n\n        this.swap = new EthTokenSwap({\n            mainnet: this.config.isMainnet,\n            address: this.config.contracts.eth_token_address,\n            abi: this.config.contracts.eth_token_abi,\n            name: token,\n            decimals: this.config.tokens[token].decimals,\n            tokenAddress: this.config.tokens[token].address,\n            tokenAbi: this.config.tokens[token].abi,\n            gasLimit: 4e5,\n            gasPrice: 2e9,\n            getParticipantAddress: () => targetAddress\n        });\n    }\n\n    async checkSwapParams(swap) {\n        if (swap.balance !== this.value)\n            return false;\n    }\n\n    async getSwap() {\n\n      this.swapObj = await this.swap.swaps({\n          ownerAddress: this.sourceAddress,\n          participantAddress: this.targetAddress\n      });\n      console.log('swapObj', this.swapObj);\n      return this.swapObj;\n\n    }\n\n    async withdraw() {\n\n      try {\n          let receipt = await this.swap.withdraw({\n                  secret: this.secret,\n                  ownerAddress: this.sourceAddress\n              },\n              (transactionHash) => {this.transactionHash = transactionHash;}\n          );\n          console.log('receipt:', receipt);\n          return this.transactionHash;\n      } catch (e) {\n          console.log('withdraw error:', e);\n          throw Error('Withdraw error')\n      }\n\n    }\n\n    async getMyBalance() {\n        let bl = await this.swap.fetchBalance(this.targetAddress);\n        console.log('sourceAddress balance', bl);\n        return bl;\n    }\n\n    async getGasPrice(speed='fast') {\n        let gasPrice = await this.swap.estimateGasPrice(speed);\n        console.log('gasPrice', gasPrice.toString(10));\n        return gasPrice;\n    }\n}\n\nmodule.exports = {EthTokenSwapInitiator, EthTokenSwapReceiver};","const BigNumber = require('bignumber.js');\nconst Web3 = require('web3');\nconst InputDataDecoder = require('ethereum-input-data-decoder');\nconst debug = require('../debug');\nconst {mainnet, testnet} = require('../helpers/ethereum');\n\n\nclass EthSwap {\n\n  /**\n   *\n   * @param {object}    options\n   * @param {string}    options.address\n   * @param {array}     options.abi\n   * @param {number}    options.gasLimit\n   */\n  constructor(options) {\n\n    if (typeof options.address !== 'string') {\n      throw new Error('EthSwap: \"address\" required')\n    }\n    if (!Array.isArray(options.abi)) {\n      throw new Error('EthSwap: \"abi\" required')\n    }\n    if (typeof options.getParticipantAddress !== 'function') {\n      throw new Error('EthSwap: \"getParticipantAddress\" required')\n    }\n\n    this.web3 = typeof window !== 'undefined' && window.web3 ?  window.web3 : \n      new Web3(new Web3.providers.HttpProvider(options.provider));\n\n    this.ethereum = options.mainnet ? mainnet() : testnet();\n\n    this.fetchBalance = (address) => this.ethereum.fetchBalance(address);\n    this.estimateGasPrice = ({ speed } = {}) => this.ethereum.estimateGasPrice({ speed });\n    this.getParticipantAddress = options.getParticipantAddress;\n\n    this.address        = options.address\n    this.abi            = options.abi\n\n    this._swapName      = 'ETH';\n    this.gasLimit       = options.gasLimit || 3e5\n    this.gasPrice       = options.gasPrice || 2e9\n\n    this.decoder  = new InputDataDecoder(this.abi)\n    this.contract = new this.web3.eth.Contract(this.abi, this.address)\n  }\n\n  /**\n   * @deprecated\n   */\n  updateGas() {\n    console.warn(`EthSwap.updateGas() is deprecated and will be removed. Use .updateGasPrice()`)\n    return updateGasPrice()\n  }\n\n  async updateGasPrice() {\n    debug('gas price before update', this.gasPrice)\n\n    try {\n      this.gasPrice = await this.estimateGasPrice({ speed: 'fast' })\n    } catch(err) {\n      debug(`EthSwap: Error with gas update: ${err.message}, using old value gasPrice=${this.gasPrice}`)\n    }\n\n    debug('gas price after update', this.gasPrice)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {string} data.targetWallet\n   * @param {number} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async create(data, handleTransactionHash) {\n    if (data.targetWallet && (data.targetWallet!==data.participantAddress) && this.hasTargetWallet()) {\n      return this.createSwapTarget(data, handleTransactionHash)\n    } else {\n      return this.createSwap(data, handleTransactionHash)\n    }\n  }\n\n  async send(methodName, args, _params = {}, handleTransactionHash) {\n    if (typeof this.contract.methods[methodName] !== 'function') {\n      throw new Error(`EthSwap.send: No method ${methodName} in contract`)\n    }\n\n    await this.updateGasPrice()\n\n    return new Promise(async (resolve, reject) => {\n      const params = {\n        from: this.getParticipantAddress(),\n        gas: this.gasLimit,\n        gasPrice: this.gasPrice,\n        ..._params,\n      }\n\n      debug(`EthSwap -> ${methodName} -> params`, params)\n\n      const gasAmount = await this.contract.methods[methodName](...args).estimateGas(params)\n\n      params.gas = gasAmount\n\n      debug(`EthSwap -> ${methodName} -> gas`, gasAmount)\n\n      const receipt = await this.contract.methods[methodName](...args).send(params)\n        .on('transactionHash', (hash) => {\n          if (typeof handleTransactionHash === 'function') {\n            handleTransactionHash(hash)\n          }\n        })\n        .on('error', (err) => {\n          reject(err)\n        })\n\n      resolve(receipt)\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {string} data.targetWallet\n   * @param {number} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async createSwap(data, handleTransactionHash) {\n    const { secretHash, participantAddress, amount } = data\n\n    // already wei\n    const amountWei = amount\n    // const amountWei = this.web3.utils.toWei(amount.toString())\n\n    const hash = `0x${secretHash.replace(/^0x/, '')}`\n    const args = [ hash, participantAddress ]\n\n    return this.send('createSwap', [...args], { value: amountWei }, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {string} data.targetWallet\n   * @param {number} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async createSwapTarget(data, handleTransactionHash) {\n    const { secretHash, participantAddress, amount, targetWallet } = data\n\n    await this.updateGasPrice()\n\n    const amountWei = amount\n    //const amountWei = this.web3.utils.toWei(amount.toString())\n\n    const hash = `0x${secretHash.replace(/^0x/, '')}`\n\n    const values = [ hash, participantAddress, targetWallet ]\n\n    return this.send('createSwapTarget', [...values], { value: amountWei }, handleTransactionHash)\n  }\n  \n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @returns {Promise}\n   */\n  getBalance(data) {\n    const { ownerAddress } = data\n\n    return this.contract.methods.getBalance(ownerAddress).call({\n      from: this.getParticipantAddress(),\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  swaps(data) {\n    const { ownerAddress, participantAddress } = data\n\n    return this.contract.methods.swaps(ownerAddress, participantAddress).call()\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  async checkSwapExists(data) {\n    const swap = await this.swaps(data)\n\n    debug('swapExists', swap)\n\n    const balance = swap && swap.balance ? parseInt(swap.balance) : 0\n\n    return balance > 0\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {BigNumber} data.expectedValue\n   * @returns {Promise.<string>}\n   */\n  async checkBalance(data) {\n    const { ownerAddress, participantAddress, expectedValue, expectedHash } = data\n\n    const balance = await util.helpers.repeatAsyncUntilResult(() =>\n      this.getBalance({ ownerAddress })\n    )\n    const swap = await util.helpers.repeatAsyncUntilResult(() =>\n      this.contract.methods.swaps(ownerAddress, participantAddress).call()\n    )\n\n    const { secretHash } = swap\n    debug(`swap.secretHash`, secretHash)\n\n    const _secretHash = `${secretHash.replace(/^0x/, '')}`\n\n    debug(`secretHash: expected hash = ${expectedHash}, contract hash = ${_secretHash}`)\n\n    if (expectedHash !== _secretHash) {\n      return `Expected hash: ${expectedHash}, got: ${_secretHash}`\n    }\n\n    const expectedValueWei = BigNumber(expectedValue).multipliedBy(1e18)\n\n    if (expectedValueWei.isGreaterThan(balance)) {\n      return `Expected value: ${expectedValueWei.toString()}, got: ${balance}`\n    }\n  }\n\n  /**\n   *\n   * @returns {Promise}\n   */\n  async fetchSwapEvents() {\n    if (this._allSwapEvents) return this._allSwapEvents\n\n    const allSwapEvents = await this.contract.getPastEvents('allEvents', {\n      fromBlock: 0,\n      toBlock: 'latest',\n    })\n\n    this.contract.events.allEvents({ fromBlock: 0, toBlock: 'latest' })\n      .on('data', event => {\n        this._allSwapEvents.push(event)\n      })\n      .on('changed', (event) => {\n        console.error(`EthSwap: fetchEvents: needs rescan`)\n        this._allSwapEvents = null\n      })\n      .on('error', err => {\n        console.error(err)\n        this._allSwapEvents = null\n      })\n\n    this._allSwapEvents = allSwapEvents\n\n    return allSwapEvents\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise}\n   */\n  async findSwap(data) {\n    const { secretHash } = data\n\n    const allSwapEvents = await this.fetchSwapEvents()\n\n    const swapEvents = allSwapEvents\n      .filter(({ returnValues }) => returnValues._secretHash === `0x${secretHash.replace('0x','')}`)\n\n    const [ create, close, ...rest ] = swapEvents\n\n    if (rest && rest.length) {\n      console.error(`More than two swaps with same hash`, rest)\n      // throw new Error(`More than two swaps with same hash`)\n    }\n\n    return [ create, close ]\n  }\n\n  /**\n    *\n    * @param {object} data\n    * @param {string} data.secretHash\n    * @returns {Promise(status)}\n    */\n\n  async wasClosed(data) {\n    const [ create, close ] = await this.findSwap(data)\n\n    if (!create) {\n      debug(`No swap with hash ${data.secretHash}`)\n      return 'no swap'\n    } else if (create && !close) {\n      debug(`Open yet!`)\n      return 'open'\n    } else {\n      if (close.event == 'Withdraw') {\n        debug(`Withdrawn`)\n        return 'withdrawn'\n      } else if (close.event == 'Refund') {\n        debug(`Refund`)\n        return 'refunded'\n      } else {\n        debug(`Unknown event, error`)\n        return 'error'\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise(boolean)}\n   */\n  wasRefunded(data) {\n    return this.wasClosed(data)\n      .then((status) =>\n        status === 'refunded'\n      )\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise(boolean)}\n   */\n  async wasWithdrawn(data) {\n    const status = await this.wasClosed(data)\n    return status === 'withdrawn'\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  hasTargetWallet() {\n    return !!this.contract.methods.getTargetWallet\n  }\n\n  /**\n   *\n   * @param {string} ownerAddress\n   * @returns {Promise.<string>}\n   */\n  async getTargetWallet(ownerAddress) {\n    console.log('EthSwap->getTargetWallet');\n    let address = await util.helpers.repeatAsyncUntilResult(() =>\n      this.getTargetWalletPromise(ownerAddress)\n    )\n    return address\n  }\n\n  /**\n   *\n   * @param {string} ownerAddress\n   * @param {number} repeatCount\n   * @returns {string}\n   */\n  async getTargetWalletPromise(ownerAddress) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const targetWallet = await this.contract.methods.getTargetWallet(ownerAddress).call({\n          from: this.getParticipantAddress(),\n        })\n\n        resolve(targetWallet)\n      }\n      catch (err) {\n        reject(err)\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async calcWithdrawGas(data) {\n    return this.calcWithdrawOtherGas({\n      ownerAddress: data.ownerAddress,\n      participantAddress: this.getParticipantAddress(),\n      secret: data.secret,\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdraw(data, handleTransactionHash) {\n    return this.withdrawOther({\n      ownerAddress: data.ownerAddress,\n      participantAddress: this.getParticipantAddress(),\n      secret: data.secret,\n    }, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  async calcWithdrawNoMoneyGas(data) {\n    return this.calcWithdrawOtherGas({\n      ownerAddress: this.getParticipantAddress(),\n      participantAddress: data.participantAddress,\n      secret: data.secret,\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdrawNoMoney(data, handleTransactionHash) {\n    return this.withdrawOther({\n      ownerAddress: this.getParticipantAddress(),\n      participantAddress: data.participantAddress,\n      secret: data.secret,\n    }, handleTransactionHash)\n  }\n\n  async calcWithdrawOtherGas(data) {\n    const { ownerAddress, participantAddress, secret } = data\n\n    await this.updateGasPrice()\n\n    return new Promise(async (resolve, reject) => {\n      const _secret = `0x${secret.replace(/^0x/, '')}`\n\n      const params = {\n        from: this.getParticipantAddress(),\n        gas: this.gasLimit,\n        gasPrice: this.gasPrice,\n      }\n\n      try {\n        const gasFee = await this.contract.methods.withdrawOther(_secret, ownerAddress, participantAddress).estimateGas(params);\n        resolve(gasFee)\n      }\n      catch (err) {\n        reject(err)\n      }\n    })\n  }\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdrawOther(data, handleTransactionHash) {\n    const { ownerAddress, participantAddress, secret } = data\n\n    const _secret = `0x${secret.replace(/^0x/, '')}`\n\n    await this.updateGasPrice()\n\n    return this.send('withdrawOther', [ _secret, ownerAddress, participantAddress ], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async refund(data, handleTransactionHash) {\n    const { participantAddress } = data\n\n    await this.updateGasPrice()\n\n    return this.send('refund', [ participantAddress ], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  getSecret(data) {\n    const { participantAddress } = data\n\n    return this.contract.methods.getSecret(participantAddress).call({\n      from: this.getParticipantAddress(),\n    })\n      .then((secret) => {\n        // debug('secret ethswap.js', secret)\n        console.log('getSecret:', secret)\n        return secret\n      })\n      .catch((error) => error)\n  }\n\n/*\n  Function: withdraw(bytes32 _secret, address _ownerAddress)\n  bytes32 {...}\n  inputs: (2) []\n    0: Uint8Array(32) [ 208, 202, 170,  ]\n    1: \"e918c8719bae0525786548b8da7fbef9b33d4e25\"\n  name: \"withdraw\"\n  types: (2) []\n    0: \"bytes32\"\n    1: \"address\"\n*/\n\n  /**\n   *\n   * @param {string} transactionHash\n   * @returns {Promise<any>}\n   */\n  async getSecretFromTxhash(transactionHash) {\n    return this.web3.eth.getTransaction(transactionHash)\n      .then(txResult => {\n        try {\n          const bytes32 = this.decoder.decodeData(txResult.input)\n          return this.web3.utils.bytesToHex(bytes32.inputs[0]).split('0x')[1]\n        } catch (err) {\n          debug('Trying to fetch secret from tx: ' + err.message)\n          return\n        }\n      })\n  }\n}\n\n\nmodule.exports = EthSwap;","\nconst testnet = {\n    eth: 'https://ropsten.infura.io/v3/42c75e22d2754274a6fc6a7ebd5c78bd',\n    btc: '',\n    ton: 'dev.'\n}\n\nconst testnet_contracts = {\n    eth_address: '0x953A583ac154e60C60CEA6C0323Bc12057f51253',\n    eth_abi: [{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"}],\"name\":\"Close\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"}],\"name\":\"CreateSwap\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"}],\"name\":\"Refund\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawnAt\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ratingContractAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"swaps\",\"outputs\":[{\"internalType\":\"addresspayable\",\"name\":\"targetWallet\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"secret\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"addresspayable\",\"name\":\"_participantAddress\",\"type\":\"address\"}],\"name\":\"createSwap\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"addresspayable\",\"name\":\"_participantAddress\",\"type\":\"address\"},{\"internalType\":\"addresspayable\",\"name\":\"_targetWallet\",\"type\":\"address\"}],\"name\":\"createSwapTarget\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"getTargetWallet\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"participantAddress\",\"type\":\"address\"}],\"name\":\"withdrawNoMoney\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"participantAddress\",\"type\":\"address\"}],\"name\":\"withdrawOther\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_participantAddress\",\"type\":\"address\"}],\"name\":\"getSecret\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_participantAddress\",\"type\":\"address\"}],\"name\":\"refund\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\n    eth_token_address: '0x9572145Adaefce2e7D3c1A5d28589df0E1011145',\n    eth_token_abi: [{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"}],\"name\":\"CreateSwap\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"}],\"name\":\"Refund\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawnAt\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"swaps\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"addresspayable\",\"name\":\"targetWallet\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"secret\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"addresspayable\",\"name\":\"_participantAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"createSwap\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secretHash\",\"type\":\"bytes32\"},{\"internalType\":\"addresspayable\",\"name\":\"_participantAddress\",\"type\":\"address\"},{\"internalType\":\"addresspayable\",\"name\":\"_targetWallet\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"createSwapTarget\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"tokenOwnerAddress\",\"type\":\"address\"}],\"name\":\"getTargetWallet\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"participantAddress\",\"type\":\"address\"}],\"name\":\"withdrawNoMoney\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_secret\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"_ownerAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"participantAddress\",\"type\":\"address\"}],\"name\":\"withdrawOther\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_participantAddress\",\"type\":\"address\"}],\"name\":\"getSecret\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_participantAddress\",\"type\":\"address\"}],\"name\":\"refund\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\n    ton_address: '',\n    ton_abi: []\n}\n\nconst testnet_tokens = {\n    USDT: {\n        fullName: 'Tether USDT',\n        address: '0x5070C3eD94bF90868aF26b84cc6876a4137D9ECF',\n        abi: [{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_symbol\",\"type\":\"string\"},{\"internalType\":\"uint8\",\"name\":\"_decimals\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"constant\":false,\"inputs\":[],\"name\":\"acceptOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_from\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_currentValue\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"approve_fixed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"remaining\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"mint\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"dests\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"values\",\"type\":\"uint256[]\"}],\"name\":\"multimint\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\n        decimals: 6\n    },\n}\n\nconst mainnet = {\n    eth: 'https://mainnet.infura.io/v3/42c75e22d2754274a6fc6a7ebd5c78bd',\n    btc: '',\n    ton: 'net.ton.dev'\n}\n\nconst mainnet_token_contracts = {\n    USDT: {\n        fullName: 'Tether',\n        address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n        abi: '',\n        decimals: 6\n    }\n}\n\nconst testnet_config = {\n    isMainnet: false,\n    network: testnet,\n    contracts: testnet_contracts,\n    tokens: testnet_tokens\n}\n\nmodule.exports = {testnet_config}","const request = require('superagent');\n\n\nconst createResponseHandler = (req, opts) => {\n  const debug = `${opts.method.toUpperCase()} ${opts.endpoint}`\n\n  return new Promise((fulfill, reject) => req.end((err, res) => {\n    let serverError\n    let body = res.body\n\n    // Errors\n\n    if (!res && !err) {\n      serverError = `Connection failed: ${debug}`\n    }\n    else if (!res || res.statusCode >= 500) {\n      serverError = 'We`re having technical issues at that moment. Please try again later'\n    }\n\n    if (serverError) {\n      throw new Error(serverError)\n    }\n\n    if (err) {\n      // TODO write Error notifier\n      opts.onComplete()\n      return reject({ resData: body, err, res })\n    }\n\n    if (!body) {\n      try {\n        body = JSON.parse(res.text)\n      }\n      catch (err) {\n        return reject(err)\n      }\n    }\n\n    const resData = opts.modifyResult(body)\n\n    // Resolve\n\n    fulfill(resData, res)\n    opts.onComplete()\n  }))\n}\n\n\nconst defaultOptions = {\n  sameOrigin: false,\n  modifyResult: (resData) => resData,\n  onComplete: () => {},\n}\n\n/**\n *\n * @param {Object} options\n * @param {String} options.endpoint\n * @param {String} options.method\n * @param {Object} options.headers\n * @param {Object} options.query\n * @param {Object} options.body\n * @param {number} options.delay\n */\nconst sendRequest = (options) => {\n  const opts = { ...defaultOptions, ...options }\n  const req = request[opts.method](opts.endpoint)\n\n  // req.set({\n  //   'Content-Type': opts.formData ? 'application/x-www-form-urlencoded; charset=UTF-8' : 'application/json',\n  //   ...(opts.headers || {}),\n  // })\n\n  if (opts.timeout) {\n    req.timeout({\n      response: 5000,  // Wait 5 seconds for the server to start sending,\n      deadline: 60000, // but allow 1 minute for the file to finish loading.\n      ...opts.timeout,\n    })\n  }\n\n  if (opts.query) {\n    req.query(opts.query)\n  }\n\n  if (opts.body) {\n    req.send(opts.body)\n  }\n\n  if (opts.sameOrigin) {\n    req.withCredentials()\n  }\n\n  const responseHandler = createResponseHandler(req, opts)\n\n  responseHandler.abort = req.abort.bind(req)\n\n  return responseHandler\n}\n\nconst requestByMethod = (method) => (endpoint, opts) => sendRequest({ ...opts, endpoint, method })\n\n\nmodule.exports = {\n  get: requestByMethod('get'),\n  post: requestByMethod('post'),\n  patch: requestByMethod('patch'),\n  put: requestByMethod('put'),\n  delete: requestByMethod('delete'),\n}\n","const TonSwapOrderbookAbi = require('./TonSwapOrderbookAbi');\nconst Wallet = require('./Wallet')\nconst { BigInteger } = require('javascript-biginteger');\n\nclass OrderWather {\n  constructor(client, orderbook) {\n    this.client = client\n    this.orderbook = orderbook\n    this.TON_TX_RETRY = 10*60\n    this.id = undefined\n  }\n\n  async initId() {\n    if (!this.id) {\n      this.id = this.orderbook.bytesToHex(await this.orderbook.generateSecret())\n    }\n  }\n\n  storageId () {\n    return this.id\n  }\n\n  load (id) {\n    const item = localStorage.getItem(id)\n    if (!item) return\n    const state = JSON.parse(item)\n    this.state = state || undefined\n    this.id = id\n  }\n\n  save () {\n    if (!this.id) return\n    localStorage.setItem(this.id, JSON.stringify(this.state))\n    return this.id\n  }\n\n  getOrder() {\n    return this.state\n  }\n\n  async createOrder(fromToken, toToken, rate, amount, minAmount, lockTime, initiatorAltAddress, address, seed) {\n    console.log('createOrder', fromToken, toToken, rate, amount, minAmount, lockTime, initiatorAltAddress, address, seed)\n    const swapDirect = fromToken === 'TON CRYSTAL'\n    const swapId = swapDirect ? this.orderbook.directTable[toToken] : this.orderbook.reversedTable[fromToken]\n\n    let secret = '0x0'\n    if (swapDirect) {\n      secret = '0x' + this.orderbook.hexAlign(this.orderbook.bytesToHex(await this.orderbook.generateSecret()), 64)\n    }\n\n    this.create(swapId, address, swapDirect, false, secret, undefined, address)\n    this.seed = seed\n\n    try {\n      const tx = await this.orderbook.createOrder (fromToken, toToken, rate, amount, minAmount, lockTime, initiatorAltAddress, secret, this.seed)\n      this.state.tonCreateTxId = tx ? tx.transaction_id : undefined\n      this.state.tonCreateTxTm = Math.floor(Date.now() / 1000)\n    } catch (e) {\n      console.log('createOrder error:', e)\n      this.state.status = 'failed'\n      this.save()\n      throw e\n    }\n\n    this.watch()\n    \n    return true\n  }\n\n  async confirmOrder(order, amount, recipientAltAddress, address, seed) {\n    console.log('confirmOrder', order, amount, recipientAltAddress, address, seed)\n\n    let secret = '0x0'\n    if (!order.direct) {\n      secret = '0x' + this.orderbook.hexAlign(this.orderbook.bytesToHex(await this.orderbook.generateSecret()), 64)\n    }\n\n    this.create(order.swapId, order.id, order.direct, true, secret, order, address)\n    this.seed = seed\n\n    try {\n      const tx = await this.orderbook.confirmOrder(order, amount, recipientAltAddress, secret, this.seed)\n      this.state.tonConfirmTxId = tx ? tx.transaction_id : undefined\n      this.state.tonConfirmTxTm = Math.floor(Date.now() / 1000)\n    } catch (e) {\n      console.log('confirmOrder error:', e)\n      this.state.status = 'failed'\n      this.save()\n      throw e\n    }\n\n    this.watch()\n    \n    return true\n  }\n\n  /**\n  swapId\n  */\n  create (swapId, id, direct, confirm, secret, order, address) {\n    this.state = {\n      status: order !== undefined ? 'confirming' : 'initiated',\n      swapId,\n      id,\n      address,\n      direct,\n      confirm,\n      secret,\n      order,\n      created: Math.floor(Date.now() / 1000),\n    }\n    this.save()\n  }\n\n  isActive () {\n    if (this.state !== undefined) {\n      return !(this.state.status === 'closed' || this.state.status === 'failed')\n    } else {\n      return false\n    }\n  }\n\n  async watch () {\n    while (this.isActive()) {\n\n      let old_status = this.state.status\n      let changed = false\n      if (!this.state.confirm) {\n        // state for order initiator\n        if (this.state.direct) {\n          switch(this.state.status) {\n            case 'initiated':\n              changed = await this.checkCreated()\n              break\n            case 'created':\n              changed = await this.checkConfirm()\n              break\n            case 'confirmed':\n              changed = await this.withdrawAltSecret()\n              break\n            case 'return':\n              changed = await this.withdrawTonTimeout()\n              break\n          }\n        } else {\n          switch(this.state.status) {\n            case 'initiated':\n              changed = await this.checkCreated()\n              break\n            case 'created':\n              changed = await this.checkConfirm()\n              break\n            case 'confirmed':\n              changed = await this.createAltSwap()\n              break\n            case 'waitsecret':\n              changed = await this.waitForSecret()\n              break\n            case 'withdrawTon':\n              changed = await this.withdrawTonSecret()\n              break\n            case 'withdrawAlt':\n              changed = await this.withdrawAltTimeout()\n              break\n          }\n        }\n      } else {\n        // state for order confirmator\n        if (this.state.direct) {\n          switch(this.state.status) {\n            case 'created':\n            case 'confirming':\n              changed = await this.checkConfirm()\n              break\n            case 'confirmed':\n              changed = await this.createAltSwap()\n              break\n            case 'waitsecret':\n              changed = await this.waitForSecret()\n              break\n            case 'withdrawTon':\n              changed = await this.withdrawTonSecret()\n              break\n            case 'withdrawAlt':\n              changed = await this.withdrawAltTimeout()\n              break\n          }\n        } else {\n          switch(this.state.status) {\n            case 'created':\n            case 'confirming':\n              changed = await this.checkConfirm()\n              break\n            case 'confirmed':\n              changed = await this.withdrawAltSecret()\n              break\n            case 'return':\n              changed = await this.withdrawTonTimeout()\n              break\n          }\n        }\n      }\n      if (changed) {\n        console.log('Order state changed:', this.id, old_status + ' -> ' + this.state.status)\n        this.save()\n        continue\n      }\n      await new Promise(resolve => setTimeout(resolve, 20000))\n    }\n  }\n\n  async checkCreated () {\n    if (this.state.status !== 'initiated') {\n      console.warn('checkCreated: Incorrect state:', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (tm > this.state.created + 10*60) {\n      this.state.status = 'failed'\n      return true\n    }\n\n    try {\n      let order\n      if (this.state.direct) {\n        order = await this.orderbook.getDirectOrder(this.state.swapId, this.state.id)\n      } else {\n        order = await this.orderbook.getReversedOrder(this.state.swapId, this.state.id)\n      }\n      if (order === undefined) {\n        return false\n      }\n      this.state.order = order\n      this.state.status = 'created'\n      return true\n    } catch (e) {\n      console.log('checkCreated error:', e)\n    }\n    return false\n  }\n\n  async checkConfirm () {\n    if (this.state.status !== 'created' && this.state.status !== 'confirming') {\n      console.warn('checkConfirm: Incorrect state:', this.state.status)\n    }\n\n    try {\n      let order\n      if (this.state.direct) {\n        order = await this.orderbook.getDirectOrder(this.state.swapId, this.state.id)\n      } else {\n        order = await this.orderbook.getReversedOrder(this.state.swapId, this.state.id)\n      }\n      if (order === undefined) {\n        if (this.state.confirm) {\n          this.state.status = 'failed'\n        } else {\n          this.state.status = 'closed'\n        }\n        console.log('order not found, go to', this.state.status)\n        return true\n      }\n      if (!order.confirmed) {\n        return false\n      }\n      if (order.direct) {\n        if (this.state.confirm && order.confirmatorTargetAddress != this.state.address) {\n          // confirmed, but not by us\n          console.log('go to failed because', order.confirmatorTargetAddress, 'expected to be', this.state.address)\n          this.state.status = 'failed'\n          return true\n        }\n      } else {\n        if (this.state.confirm && order.confirmatorSourceAddress != this.state.address) {\n          // confirmed, but not by us\n          console.log('go to failed because', order.confirmatorSourceAddress, 'expected to be', this.state.address)\n          this.state.status = 'failed'\n          return true\n        }\n      }\n\n      this.state.order = order\n\n      this.state.confirmedTm = BigInteger(order.confirmTime).toJSValue()\n      this.state.altCreateUntil = BigInteger(order.confirmTime).toJSValue() + BigInteger(order.timeLockSlot).toJSValue()\n      this.state.altWithdrawUntil = BigInteger(order.confirmTime).toJSValue() + 2*BigInteger(order.timeLockSlot).toJSValue()\n      this.state.tonWithdrawUntil = BigInteger(order.confirmTime).toJSValue() + 3*BigInteger(order.timeLockSlot).toJSValue()\n      this.state.status = 'confirmed'\n      console.log('found confirmed order, go to', this.state.status)\n      return true\n    } catch (e) {\n      console.log('checkConfirm error:', e)\n    }\n    return false\n  }\n\n  async withdrawAltSecret () {\n    if (this.state.status !== 'confirmed') {\n      console.warn('withdrawAltSecret: Incorrect state:', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (tm > this.state.altWithdrawUntil - 60*15) {\n      this.state.status = 'return'\n      return true\n    }\n\n    const altToken = this.state.order.direct ? this.state.order.toToken : this.state.order.fromToken\n    // check alt swap exists\n    // check params\n    const altValue = await this.orderbook.getAltValue(this.state.order.value, this.state.order.exchangeRate)\n    if (altValue === undefined) {\n      this.state.status = 'return'\n      return true\n    }\n    const secretHash = this.state.order.secretHash\n    const timeLockUntil = BigInteger(this.state.order.confirmTime).toJSValue() + 2*BigInteger(this.state.order.timeLockSlot).toJSValue()\n\n    let sourceAddr\n    let dstAddress\n    if (this.state.direct) {\n      sourceAddr = this.state.order.confirmatorSourceAddress\n      dstAddress = this.state.order.initiatorTargetAddress\n    } else {\n      sourceAddr = this.state.order.initiatorSourceAddress\n      dstAddress = this.state.order.confirmatorTargetAddress\n    }\n\n    try {\n      \n      console.log('Start ' +  altToken + ' check & withdraw with secret',\n        this.state.secret, 'srcAddress', sourceAddr, 'dstAddress', dstAddress, 'altValue', altValue,\n        'secretHash', secretHash, 'until', timeLockUntil) \n\n      if (altToken === 'ETH') {\n        if (this.receiverEth === undefined) {\n          this.receiverEth = new this.orderbook.swappers.ETH.EthSwapReceiver(sourceAddr, dstAddress, this.state.secret, secretHash)\n        }\n        const res = await this.receiverEth.getSwap()\n        const balance = '0x' + BigInteger(res.balance, 10).toString(16)\n        const targetWallet = res.targetWallet\n        const createdAt = BigInteger(res.targetWallet, 10)\n        const secretHash2 = res.secretHash\n        /*\n        balance: \"100000000000000000\"\n        createdAt: \"1600357932\"\n        secret: \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n        secretHash: \"0xf2216218205d7137b1d0ddae39d42ab5f0131e2c90ad1ff8beab9ef6c1f9aa0b\"\n        targetWallet: \"0x16eb4854Af105caC0347507115946D6024A3B575\"\n        */\n        if (BigInteger(dstAddress).compare(targetWallet) !== 0) {\n          console.log('invalid dstAddress, got', targetWallet, 'expected', dstAddress)\n          return false\n        }\n        if (BigInteger(secretHash).compare(secretHash2) !== 0) {\n          console.log('invalid secretHash, got', secretHash2, 'expected', secretHash)\n          return false\n        }\n        if (BigInteger(balance).compare(altValue) !== 0) {\n          console.log('invalid amount, got', balance, 'expected', altValue)\n          return false\n        }\n        // TODO rewrite smc\n        if (tm > createdAt + 3600 - 60*20 || createdAt + 3600 < this.state.altWithdrawUntil) {\n          console.log('have no time', createdAt, 'now', tm)\n          return false\n        }\n\n        this.state.altFinishTxId = await this.receiverEth.withdraw()\n        this.state.altFinishTxTm = Math.floor(Date.now() / 1000)\n        this.state.status = 'return'\n        return true\n      } else if (altToken === 'USDT') {\n\n        if (this.receiverEth === undefined) {\n          this.receiverEth = new this.orderbook.swappers.USDT.EthTokenSwapReceiver('USDT', sourceAddr, dstAddress, this.state.secret, secretHash)\n        }\n        const res = await this.receiverEth.getSwap()\n        const balance = '0x' + BigInteger(res.balance, 10).toString(16)\n        const targetWallet = res.targetWallet\n        const createdAt = BigInteger(res.targetWallet, 10)\n        const secretHash2 = res.secretHash\n        const tokenAddress = this.receiverEth.tokenAddress\n        const tokenAddress2 = res.token\n        /*\n        address token;\n        address payable targetWallet;\n        bytes32 secret;\n        bytes32 secretHash;\n        uint256 createdAt;\n        uint256 balance;\n        balance: \"2000000\"\n        createdAt: \"1600412628\"\n        secret: \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n        secretHash: \"0xdd896b7ed3f7030e8c5f274e99b1226248a3edbe277cc4874d95662e2b329d45\"\n        targetWallet: \"0xe5f178488DB8a528915aBA104aBaad69977Ce3b6\"\n        token: \"0x5070C3eD94bF90868aF26b84cc6876a4137D9ECF\"\n        */\n\n        if (BigInteger(dstAddress).compare(targetWallet) !== 0) {\n          console.log('invalid dstAddress, got', targetWallet, 'expected', dstAddress)\n          return false\n        }\n        if (BigInteger(secretHash).compare(secretHash2) !== 0) {\n          console.log('invalid secretHash, got', secretHash2, 'expected', secretHash)\n          return false\n        }\n        if (BigInteger(balance).compare(altValue) !== 0) {\n          console.log('invalid amount, got', balance, 'expected', altValue)\n          return false\n        }\n        if (BigInteger(tokenAddress).compare(tokenAddress2) !== 0) {\n          console.log('invalid token, got', tokenAddress2, 'expected', tokenAddress)\n          return false\n        }\n        // TODO rewrite smc\n        if (tm > createdAt + 3600 - 60*20 || createdAt + 3600 < this.state.altWithdrawUntil) {\n          console.log('have no time', createdAt, 'now', tm)\n          return false\n        }\n\n        this.state.altFinishTxId = await this.receiverEth.withdraw()\n        this.state.altFinishTxTm = Math.floor(Date.now() / 1000)\n        this.state.status = 'return'\n        return true\n      }\n\n    } catch (e) {\n      console.log('withdrawAltSecret error:', e)\n    }\n\n    return false\n  }\n\n  async createAltSwap () {\n    if (this.state.status !== 'confirmed') {\n      console.warn('createAltSwap: Incorrect state:', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (tm > this.state.altCreateUntil - 60*15) {\n      this.state.status = 'failed'\n      return true\n    }\n\n    const altToken = this.state.order.direct ? this.state.order.toToken : this.state.order.fromToken\n\n    // create alt swap\n    const altValue = await this.orderbook.getAltValue(this.state.order.value, this.state.order.exchangeRate)\n    if (altValue === undefined) {\n      this.state.status = 'failed'\n      return true\n    }\n    const secretHash = this.state.order.secretHash\n    const timeLockUntil = BigInteger(this.state.order.confirmTime).toJSValue() + 2*BigInteger(this.state.order.timeLockSlot).toJSValue()\n\n    let sourceAddr\n    let dstAddress\n    if (this.state.direct) {\n      sourceAddr = this.state.order.confirmatorSourceAddress\n      dstAddress = this.state.order.initiatorTargetAddress\n    } else {\n      sourceAddr = this.state.order.initiatorSourceAddress\n      dstAddress = this.state.order.confirmatorTargetAddress\n    }\n    // validate addresses\n\n    try {\n\n      console.log('Start ' +  altToken + ' swap init with secret hash',\n        secretHash, 'srcAddress', sourceAddr, 'dstAddress', dstAddress, 'altValue', altValue, 'until', timeLockUntil) \n      \n      if (altToken === 'ETH') {\n        if (this.initiatorEth === undefined) {\n          this.initiatorEth = new this.orderbook.swappers.ETH.EthSwapInitiator(sourceAddr, dstAddress, secretHash)\n        }\n        this.state.altTxId = await this.initiatorEth.create(altValue)\n        this.state.altTxTm = Math.floor(Date.now() / 1000)\n\n        this.state.status = 'waitsecret'\n        return true\n      } else if (altToken === 'USDT') {\n        if (this.initiatorEth === undefined) {\n          this.initiatorEth = new this.orderbook.swappers.USDT.EthTokenSwapInitiator('USDT', sourceAddr, dstAddress, secretHash)\n        }\n        if (this.state.altApproveTxId === undefined) {\n          this.state.altApproveTxId = await this.initiatorEth.approve(altValue)\n          this.state.altApproveTxTm = Math.floor(Date.now() / 1000)\n          return true\n        } else {\n          const amount = await this.initiatorEth.checkApprove()\n          if (BigInteger(amount).compare(altValue) !== 0) {\n            console.log('Approve', amount, 'expected', altValue)\n            return false\n          }\n        }\n        this.state.altTxId = await this.initiatorEth.create(altValue)\n        this.state.altTxTm = Math.floor(Date.now() / 1000)\n\n        this.state.status = 'waitsecret'\n        return true\n      }\n\n      return false\n    } catch (e) {\n      console.log('createAltSwap error:', e)\n      return false\n    }\n\n    return false\n  }\n\n  async waitForSecret() {\n    if (this.state.status !== 'waitsecret') {\n      console.warn('waitForSecret: Incorrect state', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (tm > this.state.altWithdrawUntil + 60) {\n      this.state.status = 'withdrawAlt'\n      return true\n    }\n\n    const altToken = this.state.order.direct ? this.state.order.toToken : this.state.order.fromToken\n\n    const secretHash = this.state.order.secretHash\n\n    let sourceAddr\n    let dstAddress\n    if (this.state.direct) {\n      sourceAddr = this.state.order.confirmatorSourceAddress\n      dstAddress = this.state.order.initiatorTargetAddress\n    } else {\n      sourceAddr = this.state.order.initiatorSourceAddress\n      dstAddress = this.state.order.confirmatorTargetAddress\n    }\n\n    try {\n\n      // get alt swap state\n      //\n      console.log('Start request secret from ', altToken, 'srcAddress', sourceAddr, 'dstAddress', dstAddress,\n        'secretHash', secretHash)\n\n      if (altToken === 'ETH') {\n        if (this.initiatorEth === undefined) {\n          this.initiatorEth = new this.orderbook.swappers.ETH.EthSwapInitiator(sourceAddr, dstAddress, secretHash)\n        }\n\n        const res = await this.initiatorEth.getSwap()\n        if (res === undefined) {\n          return false\n        }\n        const secret = res.secret\n\n        // \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n\n        if (secret === undefined || secret === null ||\n          secret === '' || BigInteger(secret).compare(0) === 0) {\n          return false\n        }\n        this.state.secret = secret.toLowerCase()\n        this.state.status = 'withdrawTon'\n        return true\n      } else if (altToken === 'USDT') {\n        if (this.initiatorEth === undefined) {\n          this.initiatorEth = new this.orderbook.swappers.USDT.EthTokenSwapInitiator('USDT', sourceAddr, dstAddress, secretHash)\n        }\n\n        const res = await this.initiatorEth.getSwap()\n        if (res === undefined) {\n          return false\n        }\n        const secret = res.secret\n\n        // \"0x0000000000000000000000000000000000000000000000000000000000000000\"\n\n        if (secret === undefined || secret === null ||\n          secret === '' || BigInteger(secret).compare(0) === 0) {\n          return false\n        }\n        this.state.secret = secret.toLowerCase()\n        this.state.status = 'withdrawTon'\n        return true\n      }\n\n      return false\n    } catch (e) {\n      console.log('waitForSecret error:', e)\n    }\n\n    \n    return false\n  }\n\n  async withdrawAltTimeout() {\n    if (this.state.status !== 'withdrawAlt') {\n      console.warn('withdrawAltTimeout: Incorrect state', this.state.status)\n    }\n    const tm = Math.floor(Date.now() / 1000)\n    \n    const altToken = this.state.order.direct ? this.state.order.toToken : this.state.order.fromToken\n\n    const secretHash = this.state.order.secretHash\n\n    let sourceAddr\n    let dstAddress\n    if (this.state.direct) {\n      sourceAddr = this.state.order.confirmatorSourceAddress\n      dstAddress = this.state.order.initiatorTargetAddress\n    } else {\n      sourceAddr = this.state.order.initiatorSourceAddress\n      dstAddress = this.state.order.confirmatorTargetAddress\n    }\n\n    if (this.state.altFinishTxId === undefined) {\n      try {\n\n        console.log('Start withdraw timeout from ', altToken, 'srcAddress', sourceAddr, 'dstAddress', dstAddress,\n        'secretHash', secretHash, 'lockUntil', this.state.altWithdrawUntil, 'now', tm)\n\n        if (altToken === 'ETH') {\n          if (this.initiatorEth === undefined) {\n            this.initiatorEth = new this.orderbook.swappers.ETH.EthSwapInitiator(sourceAddr, dstAddress, secretHash)\n          }\n          const tx = await this.initiatorEth.withdrawWithTimeout()\n\n          if (tx !== undefined) {\n            this.state.altFinishTxId = tx\n            this.state.altFinishTxTm = Math.floor(Date.now() / 1000)\n            // this.state.status = 'withdrawTon'\n            return true\n          }\n        } else if (altToken === 'USDT') {\n          if (this.initiatorEth === undefined) {\n            this.initiatorEth = new this.orderbook.swappers.USDT.EthTokenSwapInitiator('USDT', sourceAddr, dstAddress, secretHash)\n          }\n          const tx = await this.initiatorEth.withdrawWithTimeout()\n\n          if (tx !== undefined) {\n            this.state.altFinishTxId = tx\n            this.state.altFinishTxTm = Math.floor(Date.now() / 1000)\n            return true\n          }\n        }\n\n        return false\n      } catch (e) {\n        console.log('withdrawAltTimeout error:', e)\n      }\n    }\n\n    try {\n\n      // get alt swap state\n      console.log('Start request state from ', altToken, 'srcAddress', sourceAddr, 'dstAddress', dstAddress,\n        'secretHash', secretHash)\n      let secret = undefined\n\n      if (altToken === 'ETH') {\n        // const secret = await this.initiatorEth.waitForSecret()\n        if (this.initiatorEth === undefined) {\n          this.initiatorEth = new this.orderbook.swappers.ETH.EthSwapInitiator(sourceAddr, dstAddress, secretHash)\n        }\n        const res = await this.initiatorEth.getSwap()\n\n        if (res === undefined) {\n          return false\n        }\n        const secret = res.secret\n        const balance = BigInteger(res.balance, 10)\n        if (balance.compare(0) === 0) {\n          // withdrawn\n          this.state.status = 'failed'\n          return true\n        }\n\n        if (secret === undefined || secret === null ||\n          secret === '' || BigInteger(secret).compare(0) === 0) {\n          return false\n        }\n\n        this.state.secret = secret.toLowerCase()\n        this.state.status = 'withdrawTon'\n        return true\n      }\n    } catch (e) {\n      console.log('withdrawAltTimeout error:', e)\n    }\n\n    return false\n  }\n\n\n  async withdrawTonSecret () {\n    if (this.state.status !== 'withdrawTon') {\n      console.warn('withdrawTonSecret: Incorrect state', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (this.state.tonFinishTxId === undefined || tm > this.state.tonFinishTxTm + this.TON_TX_RETRY) {\n      try {\n        const tx = await this.orderbook.finishOrderWithSecret(this.state.order, this.state.secret, this.seed)\n        this.state.tonFinishTxId = tx ? tx.transaction_id : undefined\n        this.state.tonFinishTxTm = Math.floor(Date.now() / 1000)\n        return true\n      } catch (e) {\n        console.log('finishOrderWithSecret error:', e)\n      }\n    }\n\n    try {\n      let order\n      if (this.state.direct) {\n        order = await this.orderbook.getDirectOrder(this.state.swapId, this.state.id)\n      } else {\n        order = await this.orderbook.getReversedOrder(this.state.swapId, this.state.id)\n      }\n      if (order === undefined) {\n        this.state.status = 'closed'\n        return true\n      }\n    } catch (e) {\n      console.log('withdrawTonSecret error:', e)\n    }\n\n    return false\n  }\n\n\n  async withdrawTonTimeout () {\n    if (this.state.status !== 'return') {\n      console.warn('withdrawTonTimeout: Incorrect state', this.state.status)\n    }\n\n    const tm = Math.floor(Date.now() / 1000)\n\n    if (tm > this.state.tonWithdrawUntil + 60) {\n\n      if (this.state.tonFinishTxId === undefined || tm > this.state.tonFinishTxTm + this.TON_TX_RETRY) {\n        try {\n          const tx = await this.orderbook.finishOrderWithTimeout(this.state.order, this.seed)\n          this.state.tonFinishTxId = tx ? tx.transaction_id : undefined\n          this.state.tonFinishTxTm = Math.floor(Date.now() / 1000)\n          return true\n        } catch (e) {\n          console.log('finishOrderWithTimeout error:', e)\n        }\n      }\n\n    }\n\n    try {\n      let order\n      if (this.state.direct) {\n        order = await this.orderbook.getDirectOrder(this.state.swapId, this.state.id)\n      } else {\n        order = await this.orderbook.getReversedOrder(this.state.swapId, this.state.id)\n      }\n      if (order === undefined) {\n        this.state.status = 'closed'\n        return true\n      }\n    } catch (e) {\n      console.log('getOrder error:', e)\n    }\n\n    return false\n  }\n\n}\n\nclass OrdersWatcher {\n  constructor(client, orderbook) {\n    this.client = client\n    this.orderbook = orderbook\n    this.orders = []\n    this.inited = false\n  }\n\n  isInited() {\n    return this.inited\n  }\n\n  init(address, seed) {\n    this.address = address\n    this.seed = seed\n    this.loadAll()\n    this.inited = true\n  }\n\n  loadAll () {\n    let list = localStorage.getItem('orderList_' + this.address)\n    if (!list) {\n      return\n    }\n    list = JSON.parse(list)\n    for (let i in list) {\n      let order = new OrderWather(this.client, this.orderbook)\n      order.load(list[i])\n      if (order.state === undefined)\n        continue\n      if (order.isActive()) {\n        order.seed = this.seed\n        order.watch()\n      }\n      this.orders.push(order)\n    }\n  }\n\n  saveAll () {\n    let list = []\n    for (let i in this.orders) {\n      let order = this.orders[i]\n      if (order.storageId())\n        list.push(order.storageId())\n    }\n    localStorage.setItem('orderList_' + this.address, JSON.stringify(list))\n  }\n\n  async newOrder() {\n    const order = new OrderWather(this.client, this.orderbook)\n    await order.initId()\n    this.orders.push(order)\n    this.saveAll()\n    return order\n  }\n\n  isAnyActive() {\n    for (let i in this.orders) {\n      let order = this.orders[i]\n      if (order.isActive()) {\n        return true\n      }\n    }\n    return false\n  }\n\n  getOrders() {\n    let list = []\n    for (let i in this.orders) {\n      let order = this.orders[i]\n      list.push(order.getOrder())\n    }\n    return list\n  }\n}\n\nmodule.exports = OrdersWatcher","\nconst TonSwapOrderbookAbi = {\n\t\"ABI version\": 2,\n\t\"header\": [\"time\"],\n\t\"functions\": [\n\t\t{\n\t\t\t\"name\": \"constructor\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"ethSmcAddress\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"ethTokenSmcAddress\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"withdraw\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"amount\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getBalance\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"participant\",\"type\":\"address\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"inOrders\",\"type\":\"uint256\"},{\"name\":\"locked\",\"type\":\"uint256\"}],\"name\":\"balance\",\"type\":\"tuple\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getEthSmcAddress\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"ethSmcAddress\",\"type\":\"uint256\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getEthTokenSmcAddress\",\n\t\t\t\"inputs\": [\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"ethTokenSmcAddress\",\"type\":\"uint256\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"createDirectOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"minValue\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"exchangeRate\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"timeLockSlot\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"secretHash\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"initiatorTargetAddress\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"deleteDirectOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"confirmDirectOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"confirmatorSourceAddress\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"finishDirectOrderWithSecret\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"secret\",\"type\":\"bytes\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"finishDirectOrderWithTimeout\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"createReversedOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"minValue\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"exchangeRate\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"timeLockSlot\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorSourceAddress\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"deleteReversedOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"confirmReversedOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"confirmatorTargetAddress\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"secretHash\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"finishReversedOrderWithSecret\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"},\n\t\t\t\t{\"name\":\"secret\",\"type\":\"bytes\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"finishReversedOrderWithTimeout\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"calcForeignOutput\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"value\",\"type\":\"uint256\"},\n\t\t\t\t{\"name\":\"exchangeRate\",\"type\":\"uint256\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"foreignValue\",\"type\":\"uint256\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getDirectOrders\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"orders\",\"type\":\"address[]\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getReversedOrders\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"orders\",\"type\":\"address[]\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getDirectOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"confirmed\",\"type\":\"bool\"},{\"name\":\"confirmTime\",\"type\":\"uint32\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"minValue\",\"type\":\"uint256\"},{\"name\":\"exchangeRate\",\"type\":\"uint256\"},{\"name\":\"timeLockSlot\",\"type\":\"uint32\"},{\"name\":\"secretHash\",\"type\":\"uint256\"},{\"name\":\"initiatorTargetAddress\",\"type\":\"uint256\"},{\"name\":\"confirmatorTargetAddress\",\"type\":\"address\"},{\"name\":\"confirmatorSourceAddress\",\"type\":\"uint256\"}],\"name\":\"order\",\"type\":\"tuple\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getReversedOrder\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"dbId\",\"type\":\"uint32\"},\n\t\t\t\t{\"name\":\"initiatorAddress\",\"type\":\"address\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"components\":[{\"name\":\"confirmed\",\"type\":\"bool\"},{\"name\":\"confirmTime\",\"type\":\"uint32\"},{\"name\":\"foreignValue\",\"type\":\"uint256\"},{\"name\":\"foreignMinValue\",\"type\":\"uint256\"},{\"name\":\"exchangeRate\",\"type\":\"uint256\"},{\"name\":\"timeLockSlot\",\"type\":\"uint32\"},{\"name\":\"initiatorSourceAddress\",\"type\":\"uint256\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"confirmatorSourceAddress\",\"type\":\"address\"},{\"name\":\"confirmatorTargetAddress\",\"type\":\"uint256\"},{\"name\":\"secretHash\",\"type\":\"uint256\"}],\"name\":\"order\",\"type\":\"tuple\"}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"name\": \"getHash\",\n\t\t\t\"inputs\": [\n\t\t\t\t{\"name\":\"secret\",\"type\":\"bytes\"}\n\t\t\t],\n\t\t\t\"outputs\": [\n\t\t\t\t{\"name\":\"hash\",\"type\":\"uint256\"}\n\t\t\t]\n\t\t}\n\t],\n\t\"data\": [\n\t],\n\t\"events\": [\n\t]\n}\n\n\n\n\nmodule.exports = TonSwapOrderbookAbi;","//const request = require('request-promise-native')\nconst request = require('../util/request')\nconst debug = require('../debug')\nconst Web3 = require('web3')\n\n// const MAINNET_PROVIDER = `https://mainnet.infura.io/JCnK5ifEPH9qcQkX0Ahl`\nconst TESTNET_PROVIDER = `https://rinkeby.infura.io/JCnK5ifEPH9qcQkX0Ahl`\n\nconst MAINNET_PROVIDER = process.env.WEB3_MAINNET_PROVIDER || `https://geth.swaponline.site`\n// const TESTNET_PROVIDER = process.env.WEB3_TESTNET_PROVIDER || `https://tgeth.swaponline.site`\nconst LOCAL_PROVIDER = process.env.WEB3_LOCAL_PROVIDER || `http://localhost:7545`\n\nconst WEB3_PROVIDERS = {\n  mainnet: new Web3.providers.HttpProvider(MAINNET_PROVIDER),\n  testnet: new Web3.providers.HttpProvider(TESTNET_PROVIDER),\n  localnet: new Web3.providers.HttpProvider(LOCAL_PROVIDER),\n}\n\nconst ETHERCHAIN_API = `https://www.etherchain.org/api/gasPriceOracle`\nconst ETHGASSTATION_API = `https://ethgasstation.info/json/ethgasAPI.json`\nconst BigNumber = require('bignumber.js')\nconst TEN = new BigNumber(10)\n\nconst ETHERSCAN_APIKEY = `F5HISS9Z7CKKWHQAGC9ZFS8I8B28B3FI3U`\n\nconst filterError = (error) => {\n  const { name, code, statusCode, options } = error\n\n  debug('swap.core:ethereum')(`UnknownError: statusCode=${statusCode} ${error.message}`)\n\n  throw error\n}\n\nclass Ethereum {\n\n  constructor(_network = 'testnet', _customProvider) {\n    const _provider = WEB3_PROVIDERS[_network]\n\n    if (typeof web3 !== 'undefined') {\n      this.core = new Web3(web3.currentProvider)\n    } else {\n      this.core = new Web3(_provider)\n    }\n\n    this.etherscan = _network === 'testnet'\n      ? `https://ropsten.etherscan.io`\n      : `https://api.etherscan.io`\n  }\n\n  fetchBalance(address) {\n    return this.core.eth.getBalance(address)\n      .then((wei) => {\n        let balance = this.core.utils.fromWei(wei)\n\n        debug('swap.core:ethereum')('ETH Balance:', balance)\n\n        return balance\n      })\n      .catch((error) => {\n        debug('swap.core:ethereum')('ETH error:', error)\n\n        return '0'\n      })\n  }\n\n  fetchTokenBalance(address, tokenAddress, decimals) {\n    const base = TEN.pow(decimals) // 1e18 usually\n    const url = `${this.etherscan}/api?module=account&action=tokenbalance&contractaddress=${tokenAddress}&address=${address}&apikey=${ETHERSCAN_APIKEY}`\n\n    // cache 10 seconds\n    // query request\n    return request\n      .get(url, {\n        cacheResponse: 10*1000,\n        queryResponse: true,\n      })\n//      .then(json => JSON.parse(json))\n      .then(({ result }) => result)\n      .then(raw => BigNumber(raw).dividedBy(base).toString())\n      .catch(error => {\n        debug('swap.core:ethereum')(`TokenBalanceError: ${error.statusCode} ${url} - Failed to fetch token balance (${tokenAddress}). Probably too frequent request!`)\n\n        return '0'\n      })\n  }\n\n  async sendTransaction({to, value}) {\n    const from = this.core.eth.accounts.wallet[0]\n    const gas = 1e5\n\n    value = this.core.utils.toWei(value.toString())\n\n    return this.core.eth.sendTransaction({ from, to, value, gas })\n  }\n\n  async estimateGasPrice(options) {\n    try {\n      return await this.estimateGasPriceEtherChain(options)\n    } catch (etherChainError) {\n      console.error('EstimateFeeError: EtherChain, falling back to EthGasStation estimation...', etherChainError)\n    }\n\n    try {\n      return await this.estimateGasPriceEthGasStation(options)\n    } catch(ethGasStationError) {\n      console.error('EstimateFeeError: EthGasStation, falling back to Web3 estimation...', ethGasStationError)\n    }\n\n    return await this.estimateGasPriceWeb3(options)\n  }\n\n  async estimateGasPriceWeb3({ speed = 'fast' } = {}) {\n    const _multiplier = (() => {\n      switch (speed) {\n        case 'fast':    return 2\n        case 'normal':  return 1\n        case 'slow':    return 0.5\n        default:      return 1\n      }\n    })()\n\n    const gasPrice = await new Promise((resolve, reject) =>\n      this.core.eth.getGasPrice((err, gasPrice) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(gasPrice)\n        }\n      })\n    )\n\n    return BigNumber(gasPrice).multipliedBy(_multiplier)\n  }\n\n  estimateGasPriceEtherChain({ speed = 'fast' } = {}) {\n    const _speed = (() => {\n      switch (speed) {\n        case 'fast':    return 'fast'\n        case 'normal':  return 'standard'\n        case 'slow':    return 'safeLow'\n        default:      return 'standard'\n      }\n    })()\n\n    // cache 10 minute\n    // query request\n    // use cache if fail\n    return request\n      .get(`${ETHERCHAIN_API}`, {\n        cacheResponse: 10*60*1000,\n        queryResponse: true,\n        cacheOnFail: true,\n      })\n//      .then(json => JSON.parse(json))\n      .then(fees => BigNumber(fees[_speed]).multipliedBy(1e9))\n      .catch(error => filterError(error))\n  }\n\n  estimateGasPriceEthGasStation({ speed = 'fast' }) {\n    const _speed = (() => {\n      switch (speed) {\n        case 'fast':    return 'fast'\n        case 'normal':  return 'average'\n        case 'slow':    return 'safeLow'\n        default:      return 'average'\n      }\n    })()\n\n    // cache 10 minute\n    // query request\n    // use cache if fail\n    return request\n      .get(`${ETHGASSTATION_API}`, {\n        cacheResponse: 10*60*1000,\n        queryResponse: true,\n        cacheOnFail: true,\n      })\n //     .then(json => JSON.parse(json))\n      .then(fees => BigNumber(fees[_speed]).dividedBy(10).multipliedBy(1e9))\n      .catch(error => filterError(error))\n  }\n}\n\nmodule.exports = new Ethereum()\nmodule.exports.mainnet = () => new Ethereum('mainnet')\nmodule.exports.testnet = () => new Ethereum('testnet')\nmodule.exports.localnet = () => new Ethereum('localnet')\n","const TonSwapOrderbook = require('./TonSwapOrderbook')\n\nif (typeof window !== 'undefined') {\n    window.TonSwapOrderbook = TonSwapOrderbook;\n}\n\nmodule.exports = TonSwapOrderbook;","module.exports = (prefix) => { console.log(prefix); return console.log; };\n","const BigNumber = require('bignumber.js');\nconst Web3 = require('web3');\nconst InputDataDecoder = require('ethereum-input-data-decoder');\nconst debug = require('../debug');\nconst {mainnet, testnet} = require('../helpers/ethereum');\n\n\nclass EthTokenSwap {\n\n  /**\n   *\n   * @param {object}    options\n   * @param {string}    options.name\n   * @param {string}    options.address\n   * @param {array}     options.abi\n   * @param {string}    options.tokenAddress\n   * @param {array}     options.tokenAbi\n   * @param {number}    options.gasLimit\n   */\n  constructor(options) {\n\n    if (!options.name) {\n      throw new Error('EthTokenSwap: \"name\" required')\n    }\n    if (typeof options.address !== 'string') {\n      throw new Error('EthTokenSwap: \"address\" required')\n    }\n    if (typeof options.decimals !== 'number') {\n      throw new Error('EthTokenSwap: \"decimals\" required')\n    }\n    if (!Array.isArray(options.tokenAbi)) {\n      throw new Error('EthTokenSwap: \"abi\" required')\n    }\n    if (typeof options.tokenAddress !== 'string') {\n      throw new Error('EthTokenSwap: \"tokenAddress\" required')\n    }\n    if (!Array.isArray(options.tokenAbi)) {\n      throw new Error('EthTokenSwap: \"tokenAbi\" required')\n    }\n    if (typeof options.getParticipantAddress !== 'function') {\n      throw new Error('EthTokenSwap: \"getParticipantAddress\" required')\n    }\n\n    this._swapName      = options.name.toUpperCase()\n\n    this.web3 = typeof window !== 'undefined' && window.web3 ?  window.web3 : \n      new Web3(new Web3.providers.HttpProvider(options.provider));\n\n    this.ethereum = options.mainnet ? mainnet() : testnet();\n\n    this.fetchBalance = (address) => this.ethereum.fetchTokenBalance(address, options.tokenAddress, options.decimals);\n    this.estimateGasPrice = ({ speed } = {}) => this.ethereum.estimateGasPrice({ speed });\n    this.getParticipantAddress = options.getParticipantAddress;\n\n    this.address        = options.address\n    this.abi            = options.abi\n    this.decimals       = options.decimals\n    this.tokenAddress   = options.tokenAddress.toLowerCase()\n    this.tokenAbi       = options.tokenAbi\n\n    this.gasLimit       = options.gasLimit || 2e5\n    this.gasPrice       = options.gasPrice || 2e9\n\n    this.decoder        = new InputDataDecoder(this.abi)\n    this.contract       = new this.web3.eth.Contract(this.abi, this.address)\n    this.ERC20          = new this.web3.eth.Contract(this.tokenAbi, this.tokenAddress)\n  }\n\n  /**\n   * @deprecated\n   */\n  updateGas() {\n    console.warn(`EthSwap.updateGas() is deprecated and will be removed. Use .updateGasPrice()`)\n    return this.updateGasPrice()\n  }\n\n  async updateGasPrice() {\n    debug('gas price before update', this.gasPrice)\n\n    try {\n      this.gasPrice = await this.estimateGasPrice({ speed: 'fast' })\n    } catch(err) {\n      debug(`EthTokenSwap: Error with gas update: ${err.message}, using old value gasPrice=${this.gasPrice}`)\n    }\n\n    debug('gas price after update', this.gasPrice)\n  }\n\n  async send(methodName, args, _params = {}, handleTransactionHash) {\n    if (typeof this.contract.methods[methodName] !== 'function') {\n      throw new Error(`EthTokenSwap.send: No method ${methodName} in contract`)\n    }\n\n    await this.updateGasPrice()\n\n    return new Promise(async (resolve, reject) => {\n      const params = {\n        from: this.getParticipantAddress(),\n        gas: this.gasLimit,\n        gasPrice: this.gasPrice,\n        ..._params,\n      }\n\n      console.log(`EthTokenSwap -> ${methodName} -> params`, params)\n\n      const gasAmount = await this.contract.methods[methodName](...args).estimateGas(params)\n\n      params.gas = gasAmount\n\n      console.log(`EthTokenSwap -> ${methodName} -> gas`, gasAmount)\n\n      const receipt = await this.contract.methods[methodName](...args).send(params)\n        .on('transactionHash', (hash) => {\n          if (typeof handleTransactionHash === 'function') {\n            handleTransactionHash(hash)\n          }\n        })\n        .catch((error) => {\n          reject({ message: error.message, gasAmount: BigNumber(gasAmount).dividedBy(1e8).toString() })\n        })\n\n      resolve(receipt)\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {BigNumber} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async approve(data, handleTransactionHash) {\n    const { amount } = data\n\n    //const exp = BigNumber(10).pow(this.decimals)\n    //const newAmount = BigNumber(amount).times(exp).toString()\n    const newAmount = amount\n\n    await this.updateGasPrice()\n\n    return new Promise(async (resolve, reject) => {\n      try {\n        const params = {\n          from: this.getParticipantAddress(),\n          gas: this.gasLimit,\n          gasPrice: this.gasPrice,\n        }\n\n        debug(`EthTokenSwap -> approve -> params`, params)\n\n        const gasAmount = await this.ERC20.methods.approve(this.address, newAmount).estimateGas(params)\n\n        params.gas = gasAmount\n\n        debug(`EthTokenSwap -> approve -> gas`, gasAmount)\n\n        const result = await this.ERC20.methods.approve(this.address, newAmount).send(params)\n          .on('transactionHash', (hash) => {\n            if (typeof handleTransactionHash === 'function') {\n              handleTransactionHash(hash)\n            }\n          })\n          .catch((error) => {\n            reject({ message: error.message, gasAmount: BigNumber(gasAmount).dividedBy(1e8).toString() })\n          })\n\n        resolve(result)\n      }\n      catch (err) {\n        reject(err)\n      }\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.spender\n   * @returns {Promise}\n   */\n  checkAllowance(data) {\n    const { spender } = data\n\n    return new Promise(async (resolve, reject) => {\n      try {\n        const result = await this.ERC20.methods.allowance(spender, this.address).call({\n          from: this.getParticipantAddress(),\n        })\n\n        resolve(result)\n      }\n      catch (err) {\n        reject(err)\n      }\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {BigNumber} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async create(data, handleTransactionHash) {\n    if (data.targetWallet && (data.targetWallet!==data.participantAddress)) {\n      return this.createSwapTarget(data, handleTransactionHash)\n    } else {\n      return this.createSwap(data, handleTransactionHash)\n    }\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {BigNumber} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async createSwap(data, handleTransactionHash) {\n    const { secretHash, participantAddress, amount } = data\n\n    //const exp = BigNumber(10).pow(this.decimals)\n    //const newAmount = BigNumber(amount).times(exp).toString()\n    const newAmount = amount\n\n    const hash = `0x${secretHash.replace(/^0x/, '')}`\n    const args = [ hash, participantAddress, newAmount, this.tokenAddress ]\n    console.log('createSwap args:', args)\n\n    return this.send('createSwap', [...args], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @param {string} data.participantAddress\n   * @param {BigNumber} data.amount\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async createSwapTarget(data, handleTransactionHash) {\n    const { secretHash, participantAddress, amount, targetWallet } = data\n\n    //const exp = BigNumber(10).pow(this.decimals)\n    //const newAmount = BigNumber(amount).times(exp).toString()\n    const newAmount = amount\n\n    const hash = `0x${secretHash.replace(/^0x/, '')}`\n    const args = [ hash, participantAddress, targetWallet, newAmount, this.tokenAddress ]\n\n    return this.send('createSwapTarget', [...args], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  swaps(data) {\n    const { ownerAddress, participantAddress } = data\n\n    return this.contract.methods.swaps(ownerAddress, participantAddress).call()\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  async checkSwapExists(data) {\n    const swap = await this.swaps(data)\n\n    debug('swapExists', swap)\n\n    const balance = swap && swap.balance ? parseInt(swap.balance) : 0\n\n    return balance > 0\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @returns {Promise}\n   */\n  getBalance(data) {\n    const { ownerAddress } = data\n\n    return this.contract.methods.getBalance(ownerAddress).call({\n      from: this.getParticipantAddress(),\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {BigNumber} data.expectedValue\n   * @returns {Promise.<string>}\n   */\n  async checkBalance(data) {\n    const { ownerAddress, participantAddress, expectedValue, expectedHash } = data\n\n    const balance = await util.helpers.repeatAsyncUntilResult(() =>\n      this.getBalance({ ownerAddress })\n    )\n    const swap = await util.helpers.repeatAsyncUntilResult(() =>\n      this.contract.methods.swaps(ownerAddress, participantAddress).call()\n    )\n\n    const { secretHash } = swap\n    debug('swap.core:swaps')(`swap.secretHash`, secretHash)\n\n    const _secretHash = `${secretHash.replace(/^0x/, '')}`\n\n    debug('swap.core:swaps')(`secretHash: expected hash = ${expectedHash}, contract hash = ${_secretHash}`)\n\n    if (expectedHash !== _secretHash) {\n      return `Expected hash: ${expectedHash}, got: ${_secretHash}`\n    }\n\n    const expectedValueWei = BigNumber(expectedValue).multipliedBy(this.decimals)\n\n    if (expectedValueWei.isGreaterThan(balance)) {\n      return `Expected value: ${expectedValueWei.toString()}, got: ${balance}`\n    }\n  }\n\n\n  /**\n   *\n   * @returns {Promise}\n   */\n  async fetchSwapEvents() {\n    if (this._allSwapEvents) return this._allSwapEvents\n\n    const allSwapEvents = await this.contract.getPastEvents('allEvents', {\n      fromBlock: 0,\n      toBlock: 'latest',\n    })\n\n    this.contract.events.allEvents({ fromBlock: 0, toBlock: 'latest' })\n      .on('data', event => {\n        this._allSwapEvents.push(event)\n      })\n      .on('changed', (event) => {\n        console.error(`EthTokenSwap: fetchEvents: needs rescan`)\n        this._allSwapEvents = null\n      })\n      .on('error', err => {\n        console.error(err)\n        this._allSwapEvents = null\n      })\n\n    this._allSwapEvents = allSwapEvents\n\n    return allSwapEvents\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise}\n   */\n  async findSwap(data) {\n    const { secretHash } = data\n\n    const allSwapEvents = await this.fetchSwapEvents()\n\n    const swapEvents = allSwapEvents\n      .filter(({ returnValues }) => returnValues._secretHash === `0x${secretHash.replace('0x','')}`)\n\n    const [ create, close, ...rest ] = swapEvents\n\n    if (rest && rest.length) {\n      console.error(`More than two swaps with same hash`, rest)\n      // throw new Error(`More than two swaps with same hash`)\n    }\n\n    return [ create, close ]\n  }\n\n  /**\n    *\n    * @param {object} data\n    * @param {string} data.secretHash\n    * @returns {Promise(status)}\n    */\n\n  async wasClosed(data) {\n    const [ create, close ] = await this.findSwap(data)\n\n    if (!create) {\n      debug(`No swap with hash ${data.secretHash}`)\n      return 'no swap'\n    } else if (create && !close) {\n      debug(`Open yet!`)\n      return 'open'\n    } else {\n      if (close.event == 'Withdraw') {\n        debug(`Withdrawn`)\n        return 'withdrawn'\n      } else if (close.event == 'Refund') {\n        debug(`Refund`)\n        return 'refunded'\n      } else {\n        debug(`Unknown event, error`)\n        return 'error'\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise(boolean)}\n   */\n  wasRefunded(data) {\n    return this.wasClosed(data)\n      .then((status) =>\n        status === 'refunded'\n      )\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secretHash\n   * @returns {Promise(boolean)}\n   */\n  async wasWithdrawn(data) {\n    const status = await this.wasClosed(data)\n    return status === 'withdrawn'\n  }\n\n\n  /**\n   * @param {object} data\n   * @param {string} data.ownerAddress\n   * @param {string} tokenAddress\n   */\n  async checkTokenIsValid(data) {\n    const { ownerAddress, participantAddress } = data\n\n    debug('swap.core:swaps')(`Check token is valid. Needed token address: ${this.tokenAddress.toUpperCase()}`);\n    const swap = await util.helpers.repeatAsyncUntilResult(() =>\n      this.contract.methods.swaps(ownerAddress, participantAddress).call()\n    )\n\n    const { token } = swap\n    debug('swap.core:swaps')(`Token address at swap contract: ${token.toUpperCase()}`);\n\n    return (this.tokenAddress.toUpperCase() == token.toUpperCase())\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  hasTargetWallet() {\n    return !!this.contract.methods.getTargetWallet\n  }\n\n\n  /**\n   *\n   * @param {string} ownerAddress\n   * @returns {Promise.<string>}\n   */\n  async getTargetWallet(ownerAddress) {\n    let address = await util.helpers.repeatAsyncUntilResult(() =>\n      this.getTargetWalletPromise(ownerAddress)\n    )\n    return address\n  }\n\n  /**\n   *\n   * @param {string} ownerAddress\n   * @returns {string}\n   */\n  async getTargetWalletPromise(ownerAddress) {\n    debug('swap.core:swaps')('EthTokenSwap->getTargetWallet');\n    return new Promise(async (resolve, reject) => {\n      try {\n        const targetWallet = await this.contract.methods.getTargetWallet(ownerAddress).call({\n          from: this.getParticipantAddress(),\n        })\n        debug('swap.core:swaps')('EthTokenSwap->getTargetWallet',targetWallet);\n\n        resolve(targetWallet)\n      }\n      catch (err) {\n        reject(err)\n      }\n    });\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async calcWithdrawGas(data) {\n    return this.calcWithdrawOtherGas({\n      ownerAddress: data.ownerAddress,\n      participantAddress: this.getParticipantAddress(),\n      secret: data.secret,\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdraw(data, handleTransactionHash) {\n    return this.withdrawOther({\n      ownerAddress: data.ownerAddress,\n      participantAddress: this.getParticipantAddress(),\n      secret: data.secret,\n    } , handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  async calcWithdrawNoMoneyGas(data) {\n    return this.calcWithdrawOtherGas({\n      ownerAddress: this.getParticipantAddress(),\n      participantAddress: data.participantAddress,\n      secret: data.secret,\n    })\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdrawNoMoney(data, handleTransactionHash) {\n    return this.withdrawOther({\n      ownerAddress: this.getParticipantAddress(),\n      participantAddress: data.participantAddress,\n      secret: data.secret,\n    }, handleTransactionHash)\n  }\n\n  async calcWithdrawOtherGas(data) {\n    const { ownerAddress, participantAddress, secret } = data\n\n    await this.updateGasPrice()\n\n    return new Promise(async (resolve, reject) => {\n      const _secret = `0x${secret.replace(/^0x/, '')}`\n\n      const params = {\n        from: this.getParticipantAddress(),\n        gas: this.gasLimit,\n        gasPrice: this.gasPrice,\n      }\n\n      try {\n        const gasAmount = await this.contract.methods.withdrawOther(_secret, ownerAddress, participantAddress).estimateGas(params);\n        resolve(gasAmount)\n      }\n      catch (err) {\n        reject(err)\n      }\n    })\n  }\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.secret\n   * @param {string} data.ownerAddress\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async withdrawOther(data, handleTransactionHash) {\n    const { ownerAddress, participantAddress, secret } = data\n\n    const _secret = `0x${secret.replace(/^0x/, '')}`\n\n    console.log('withdrawOther args', [ _secret, ownerAddress, participantAddress ])\n\n    await this.updateGasPrice()\n\n    return this.send('withdrawOther', [ _secret, ownerAddress, participantAddress ], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.participantAddress\n   * @param {function} handleTransactionHash\n   * @returns {Promise}\n   */\n  async refund(data, handleTransactionHash) {\n    const { participantAddress } = data\n\n    await this.updateGasPrice()\n\n    return this.send('refund', [ participantAddress ], {}, handleTransactionHash)\n  }\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.participantAddress\n   * @returns {Promise}\n   */\n  getSecret(data) {\n    const { participantAddress } = data\n\n    return new Promise(async (resolve, reject) => {\n      try {\n        const secret = await this.contract.methods.getSecret(participantAddress).call({\n          from: this.getParticipantAddress(),\n        })\n\n        const secretValue = secret && !/^0x0+$/.test(secret) ? secret : null\n\n        resolve(secretValue)\n      }\n      catch (err) {\n        reject(err)\n      }\n    })\n  }\n\n\n  /**\n   *\n   * @param {string} transactionHash\n   * @returns {Promise<any>}\n   */\n  async getSecretFromTxhash(transactionHash) {\n      return this.web3.eth.getTransaction(transactionHash)\n      .then(txResult => {\n        try {\n          const bytes32 = this.decoder.decodeData(txResult.input)\n          return this.web3.utils.bytesToHex(bytes32.inputs[0]).split('0x')[1]\n        } catch (err) {\n          debug('swap.core:swaps')('Trying to fetch secret from tx: ' + err.message)\n          return\n        }\n      })\n    }\n}\n\n\nmodule.exports = EthTokenSwap;"],"sourceRoot":""}